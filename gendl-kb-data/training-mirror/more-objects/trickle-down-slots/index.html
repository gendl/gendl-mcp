<!DOCTYPE HTML><html lang="en"><head><title>:trickle-down-slots</title><meta charset="UTF-8" /><link rel="icon" type="image/png" href="/gorn.png" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="stylesheet" href="/css/training-style.css" /><script src="/static/3rdpty/x3dom/x3dom.js" id="x3dom_script"></script><script id="svg-panzoom" src="/static/3rdpty/svgpanzoom/svg-pan-zoom.min.js"></script><script>
var gdliid = '/shared';</script><script src="/static/gwl/js/gdlajax1595.js"></script></head><body><div class="container mx-auto"><div class="main-page-item"><div class="mt-1 ml-2 mr-5"><h2>:trickle-down-slots</h2><p><a class="text-red-500" href="/more-objects/useful-slots/index.html">&lt;-Previous</a><span class="font-bold"> | </span><a class="text-blue-500" href="/more-objects/index.html">^UP^</a><span class="font-bold"> | </span><a class="text-green-500" href="/more-objects/objects/index.html">Next-&gt;</a></p><div class="grid-container-2-650px"><div class="grid-item"><p>Recall in the <a href="/getting-started/index.html">Getting Started with GendL</a> tutorial, in the <a href="/getting-started/object-definition/index.html">Defining Objects</a> topic we discussed how values may be passed from a parent object to a child. The following code summarises the process discussed<div class="code-example"><pre><span class="code" style="margin-left: 0px;">(define-object top-level-1 (base-object)</span><span class="code" style="margin-left: 14px;">:computed-slots</span><span class="code" style="margin-left: 14px;">((my-slot-1 5))</span><span class="code" style="margin-left: 0px;"></span><span class="code" style="margin-left: 14px;">:objects</span><span class="code" style="margin-left: 14px;">((child-1 :type 'child-1</span><span class="code" style="margin-left: 84px;">:my-slot-1 (the my-slot-1))</span><span class="code" style="margin-left: 0px;"></span><span class="code" style="margin-left: 21px;">(child-2 :type 'child-2)))</span><span class="code" style="margin-left: 0px;"></span><span class="code" style="margin-left: 0px;">(define-object child-1 (base-object)</span><span class="code" style="margin-left: 14px;">:input-slots</span><span class="code" style="margin-left: 14px;">(my-slot-1))</span><span class="code" style="margin-left: 0px;"></span><span class="code" style="margin-left: 0px;">(define-object child-2 (base-object)</span><span class="code" style="margin-left: 14px;">:input-slots</span><span class="code" style="margin-left: 14px;">((my-slot-1 3)))</span></pre></div>the object <span class="object">child-1</span> defines a required <span class="object-keyword">:input-slot</span> <span class="slot">my-slot-1</span> and this is passed in from the parent in the parents <span class="object-keyword">:objects</span> section. The object <span class="object">child-2</span> defines an optional <span class="object-keyword">:input-slot</span> <span class="slot">my-slot-1</span>, in this example as no value is passed in from the parent it uses the default value<div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(make-self 'top-level-1)</span></p><span class="output">#&#60;TOP-LEVEL-1 #x210522168D></span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(the child-1 my-slot-1)</span></p><span class="output">5</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(the child-2 my-slot-1)</span></p><span class="output">3</span></pre></div></p><p>Furthermore, we covered the use of the <span class="object-keyword">:pass-down</span> input to a child object in the <a href="/getting-started/wall-example/index.html">Wall Example</a> topic<div class="code-example"><pre><span class="code" style="margin-left: 0px;">(define-object top-level-2 (base-object)</span><span class="code" style="margin-left: 14px;">:computed-slots</span><span class="code" style="margin-left: 14px;">((my-slot-1 5))</span><span class="code" style="margin-left: 0px;"></span><span class="code" style="margin-left: 14px;">:objects</span><span class="code" style="margin-left: 14px;">((child-1 :type 'child-1</span><span class="code" style="margin-left: 84px;">:pass-down (my-slot-1))))</span></pre></div><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(make-self 'top-level-2)</span></p><span class="output">#&#60;TOP-LEVEL-1 #x210561B13D></span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(the child-1 my-slot-1)</span></p><span class="output">5</span></pre></div></p><p>There is, however, a further way to ensure values flow through from a parent to a child - by using <span class="object-keyword">:trickle-down-slots</span><p>When a slot is defined as a <span class="object-keyword">:trickle-down-slot</span>, it will automatically flow through to a child object providing both of the following conditions are satisfied<ul><li>The child object has an <span class="object-keyword">:input-slot</span> of the same name</li><li>And that <span class="object-keyword">:input-slot</span> in the child object is tagged as <span class="object-keyword">:defaulting</span> and given a default value</li></ul><div class="code-example"><pre><span class="code" style="margin-left: 0px;">(define-object top-level-3 (base-object)</span><span class="code" style="margin-left: 14px;">:computed-slots</span><span class="code" style="margin-left: 14px;">((my-slot-2 2))</span><span class="code" style="margin-left: 0px;"></span><span class="code" style="margin-left: 14px;">:trickle-down-slots</span><span class="code" style="margin-left: 14px;">(my-slot-2)</span><span class="code" style="margin-left: 0px;"></span><span class="code" style="margin-left: 14px;">:objects</span><span class="code" style="margin-left: 14px;">((child-3 :type 'child-3)</span><span class="code" style="margin-left: 14px;">(child-4 :type 'child-4)))</span><span class="code" style="margin-left: 0px;"></span><span class="code" style="margin-left: 0px;">(define-object child-3 (base-object)</span><span class="code" style="margin-left: 14px;">:input-slots </span><span class="code" style="margin-left: 14px;">((my-slot-2 3 :defaulting)))</span><span class="code" style="margin-left: 0px;"></span><span class="code" style="margin-left: 0px;">(define-object child-4 (base-object)</span><span class="code" style="margin-left: 14px;">:input-slots </span><span class="code" style="margin-left: 14px;">((my-slot-2 5)))</span></pre></div><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(make-self 'top-level-3)</span></p><span class="output">#&#60;TOP-LEVEL-3 #x2104A23E2D></span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(the my-slot-2)</span></p><span class="output">2</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(the child-3 my-slot-2)</span></p><span class="output">2</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(the child-4 my-slot-2)</span></p><span class="output">5</span></pre></div></p><p>Even if the slot is defined in the parent as a <span class="object-keyword">:trickle-down-slot</span>, if an input is given explicitly it will be used, over-riding the <span class="object-keyword">:trickle-down-slot</span> value<div class="code-example"><pre><span class="code" style="margin-left: 0px;">(define-object top-level-4 (base-object)</span><span class="code" style="margin-left: 14px;">:computed-slots</span><span class="code" style="margin-left: 14px;">((my-slot-3 2))</span><span class="code" style="margin-left: 0px;"></span><span class="code" style="margin-left: 14px;">:trickle-down-slots</span><span class="code" style="margin-left: 14px;">(my-slot-3)</span><span class="code" style="margin-left: 0px;"></span><span class="code" style="margin-left: 14px;">:objects</span><span class="code" style="margin-left: 14px;">((child-5 :type 'child-5</span><span class="code" style="margin-left: 84px;">:my-slot-3 1)))</span><span class="code" style="margin-left: 0px;"></span><span class="code" style="margin-left: 0px;">(define-object child-5 (base-object)</span><span class="code" style="margin-left: 14px;">:input-slots</span><span class="code" style="margin-left: 14px;">((my-slot-3 5 :defaulting)))</span></pre></div><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(make-self 'top-level-4)</span></p><span class="output">#&#60;TOP-LEVEL-4 #x2104A3B93D></span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(the child-5 my-slot-3)</span></p><span class="output">1</span></pre></div></p><p><span class="object-keyword">:trickle-down-slots</span> are a very convenient and semi-automatic way to pass values form parent to child. An example use is with the <span class="object">box</span> object, where <span class="slot">length</span>, <span class="slot">width</span> and <span class="slot">height</span> are all <span class="object-keyword">:trickle-down-slots</span>. In previous examples, we have explicitly passed the values through, however strictly speaking this has not been required. One word of caution; it can sometimes be difficult to see where values are coming from if <span class="object-keyword">:trickle-down-slots</span> are used extensively and particularly if they are incorporated into mixins, but as with all things used appropriately they are a useful addition to the developer toolbox</p></p></div><div class="grid-item"><h2>Resources</h2><table><tr><td><a href="/t5-resources/trickle-down-slots.lisp"><img src="/common-images/lisp-file.png" style="width: 40px; height: auto;" /></a></td><td><a href="/t5-resources/trickle-down-slots.lisp">trickle-down-slots.lisp</a></td></tr></table></div></div></div></div></div></body></html>