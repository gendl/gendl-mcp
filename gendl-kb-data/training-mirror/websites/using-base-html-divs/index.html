<!DOCTYPE HTML><html lang="en"><head><title>Building pages from base-html-divs</title><meta charset="UTF-8" /><link rel="icon" type="image/png" href="/gorn.png" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="stylesheet" href="/css/training-style.css" /><script src="/static/3rdpty/x3dom/x3dom.js" id="x3dom_script"></script><script id="svg-panzoom" src="/static/3rdpty/svgpanzoom/svg-pan-zoom.min.js"></script><script>
var gdliid = '/shared';</script><script src="/static/gwl/js/gdlajax1595.js"></script></head><body><div class="container mx-auto"><div class="main-page-item"><div class="mt-1 ml-2 mr-5"><h2>Building pages from base-html-divs</h2><p><a class="text-red-500" href="/websites/using-with-lhtml-string/index.html">&lt;-Previous</a><span class="font-bold"> | </span><a class="text-blue-500" href="/websites/index.html">^UP^</a><span class="font-bold"> | </span><a class="text-green-500" href="/websites/using-form-controls/index.html">Next-&gt;</a></p><div class="main-page-container"><div class="main-page-item"><div class="grid-container-2-650px"><div class="grid-item"><p>In the <a href="/websites/simple-html-page/index.html">Creating and Publishing web pages</a> topic, the slot <span class="slot">body</span> was identified as the slot that needed to be populated with a html string in order for the object to be rendered as a web page. The whole page and be defined as a single string in this slot if required, but building a page from <span class="object">base-html-divs</span> may lead to an easier to manage page and encourages modularity and reuse, which in turn provides a common look and feel to pages</p><p>A <span class="object">base-html-div</span> is an object, which evaluates the <span class="slot">div</span> message to a html string and then we include that message in the objects parent <span class="slot">body</span>. To populate the <span class="slot">div</span> slot, we need to write a html string to the <span class="slot">inner-html</span> slot. The <span class="object">base-html-div</span> object then wraps this string with some standard html when <span class="object">div</span> is evaluated.</p></div><div class="grid-item"></div><div class="grid-item"><div class="code-example"><pre><span class="code" style="margin-left: 0px;">(in-package :gwl-user)</span><span class="code" style="margin-left: 0px;">(define-object simple-page-with-section (base-html-page)</span><span class="code" style="margin-left: 0px;"></span><span class="code" style="margin-left: 7px;">:computed-slots</span><span class="code" style="margin-left: 7px;">((body </span><span class="code" style="margin-left: 49px;">(with-lhtml-string ()</span><span class="code" style="margin-left: 70px;">(when gwl:*developing?* (str (the development-links)))</span><span class="code" style="margin-left: 70px;">(:h2 "Basic Page Sections")</span><span class="code" style="margin-left: 70px;">(str (the section-1 div)))))</span><span class="code" style="margin-left: 7px;">:objects</span><span class="code" style="margin-left: 7px;">((section-1 :type 'base-html-div</span><span class="code" style="margin-left: 133px;">:inner-html</span><span class="code" style="margin-left: 168px;">(with-litml-string ()</span><span class="code" style="margin-left: 189px;">(:p "Using page sections to provide content")))))</span><span class="code" style="margin-left: 0px;"></span><span class="code" style="margin-left: 0px;">(publish-gwl-app "/simple-base-html-div" "gwl-user::simple-page-with-section")</span></pre></div></div><div class="grid-item"><image src="/t6-images/simple-base-html-div.png" style="border: 2px solid; margin: 5px 0 0 3% ;width: auto; height: 200px;"></image></div><div class="grid-item"><p>This method, passing the value of <span class="slot">inner-html</span> directly into a <span class="object">base-html-div</span> object works well for fairly simple cases and avoids the need for creating bespoke objects based on <span class="object">base-html-div</span>, but for more complex calculations of the <span class="slot">inner-html</span> value, potentially involving a number of different inputs, it is often more practical and manageable to create specific objects by mixing in <span class="object">base-html-div</span></p></div><div class="grid-item"></div><div class="grid-item"><div class="code-example"><pre><span class="code" style="margin-left: 0px;">(in-package :gwl-user)</span><span class="code" style="margin-left: 0px;">(define-object simple-page-with-custom-section (base-html-page)</span><span class="code" style="margin-left: 0px;"></span><span class="code" style="margin-left: 7px;">:computed-slots</span><span class="code" style="margin-left: 7px;">((input-list (list 1 2 3))</span><span class="code" style="margin-left: 14px;">(body </span><span class="code" style="margin-left: 49px;">(with-lhtml-string ()</span><span class="code" style="margin-left: 70px;">(when gwl:*developing?* (str (the development-links)))</span><span class="code" style="margin-left: 70px;">(:h2 "Basic Page Sections")</span><span class="code" style="margin-left: 70px;">(str (the section-1 div)))))</span><span class="code" style="margin-left: 7px;">:objects</span><span class="code" style="margin-left: 7px;">((section-1 :type 'base-html-div-1</span><span class="code" style="margin-left: 133px;">:input-list (the input-list))))</span><span class="code" style="margin-left: 0px;"></span><span class="code" style="margin-left: 0px;">(define-object base-html-div-1 (base-html-div)</span><span class="code" style="margin-left: 7px;">:input-slots</span><span class="code" style="margin-left: 7px;">(input-list)</span><span class="code" style="margin-left: 7px;">:computed-slots</span><span class="code" style="margin-left: 7px;">((inner-html (with-lhtml-string ()</span><span class="code" style="margin-left: 140px;">(:table :border 1</span><span class="code" style="margin-left: 168px;">(:tr (:th "Content"))</span><span class="code" style="margin-left: 168px;">(dolist (c (the input-list))</span><span class="code" style="margin-left: 196px;">(htm (:tr (:td (fmt "Cell ~a content" c))))))))))</span><span class="code" style="margin-left: 0px;"></span><span class="code" style="margin-left: 0px;">(publish-gwl-app "/simple-page-with-custom-section" "gwl-user::simple-page-with-custom-section")</span></pre></div></div><div class="grid-item"><image src="/t6-images/base-html-div-object.png" style="border: 2px solid; margin: 5px 0 0 3% ;width: auto; height: 200px;"></image></div><div class="grid-item"><p>The difference between a <span class="object">base-html-div</span> <span class="slot">inner-html</span> and <span class="slot">div</span> is that <span class="slot">div</span> wraps the html defined in <span class="slot">inner-html</span> with a html div tag and an internally generated id attribue for that tag. <div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GWL-USER&nbsp;</span><span class="command" style="display: inline;">(make-self 'base-html-div-object)</span></p><span class="output">#&#60;BASE-HTML-DIV-OBJECT #x210462B07D></span><p style="display: inline;"><span class="prompt" style="display: inline;">GWL-USER&nbsp;</span><span class="command" style="display: inline;">(the section-1 inner-html)</span></p><span class="output">&#60;table border="1"></span><span class="output">  &#60;tr>&#60;th>Content&#60;/th>&#60;/tr></span><span class="output">  &#60;tr>&#60;td>Cell 1 content&#60;/td>&#60;/tr></span><span class="output">  &#60;tr>&#60;td>Cell 2 content&#60;/td>&#60;/tr></span><span class="output">  &#60;tr>&#60;td>Cell 3 content&#60;/td>&#60;/tr></span><span class="output">&#60;/table></span><p style="display: inline;"><span class="prompt" style="display: inline;">GWL-USER&nbsp;</span><span class="command" style="display: inline;">(the section-1 div)</span></p><span class="output">&#60;div id="KDpTSEVFVC1TRUNUSU9OLTEp"></span><span class="output">  &#60;table border="1"></span><span class="output">    &#60;tr>&#60;th>Content&#60;/th>&#60;/tr></span><span class="output">    &#60;tr>&#60;td>Cell 1 content&#60;/td>&#60;/tr></span><span class="output">    &#60;tr>&#60;td>Cell 2 content&#60;/td>&#60;/tr></span><span class="output">    &#60;tr>&#60;td>Cell 3 content&#60;/td>&#60;/tr></span><span class="output">  &#60;/table></span><span class="output">&#60;/div></span></pre></div>This div may then be surgically updated using AJAX, without the page being resubmitted. We'll cover using AJAX with GendL in the <a href="/websites/using-ajax/index.html">Using AJAX</a> topic, but for now the main thing to take away is how the use of AJAX may affect the granularity of a <span class="object">base-html-div</span>. If a single <span class="object">base-html-div</span> was used for the whole page, then an AJAX update would have only marginal impact on both speed of display and bandwidth used. If every element in the page was its own <span class="object">base-html-div</span> the overhead would be significant. So there's obviously a compromise somewhere in the middle. Best advice would be to group elements likely to be updated as a result of the same event together in the same <span class="object">base-html-div</span> if possible.</p></div></div></div><div class="main-page-item"><h2>Resources</h2><table><tr><td><a href="/t6-resources/gwl-patches.lisp"><img src="/common-images/lisp-file.png" style="width: 40px; height: auto;" /></a></td><td><a href="/t6-resources/gwl-patches.lisp">gwl-patches.lisp</a></td></tr><tr><td><a href="/t6-resources/using-page-sections.lisp"><img src="/common-images/lisp-file.png" style="width: 40px; height: auto;" /></a></td><td><a href="/t6-resources/using-page-sections.lisp">using-page-sections.lisp</a></td></tr></table></div></div></div></div></div></body></html>