;;
;; Copyright 2013 Genworks International 
;;
;; This source file is part of the General-purpose Declarative
;; Language project (GDL).
;;
;; This source file contains free software: you can redistribute it
;; and/or modify it under the terms of the GNU Affero General Public
;; License as published by the Free Software Foundation, either
;; version 3 of the License, or (at your option) any later version.
;; 
;; This source file is distributed in the hope that it will be useful,
;; but WITHOUT ANY WARRANTY; without even the implied warranty of
;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
;; Affero General Public License for more details.
;; 
;; You should have received a copy of the GNU Affero General Public
;; License along with this source file.  If not, see
;; <http://www.gnu.org/licenses/>.
;; 

(in-package :geom-base)

(defparameter *dxf-units*
  (list :no-units 0 :inches 1 :feet 2 :millimeters 4 :centimeters 5 :meters 6))

(defparameter *dxf-units-default* :inches)

(defparameter *dxf-header-lcad*
  "999
dxfrw 0.6.3
  0
SECTION
  2
HEADER
  9
$ACADVER
  1
AC1021
  9
$DWGCODEPAGE
  3
ANSI_1252
  9
$INSBASE
 10
0
 20
0
 30
0
  9
$EXTMIN
 10
90.83082697417871
 20
89.44859933077838
 30
0
  9
$EXTMAX
 10
259.7736405564689
 20
239.5605029171936
 30
0
  9
$LIMMIN
 10
0
 20
0
  9
$LIMMAX
 10
420
 20
297
  9
$ORTHOMODE
 70
    0
  9
$REGENMODE
 70
    1
  9
$FILLMODE
 70
    1
  9
$QTEXTMODE
 70
    0
  9
$MIRRTEXT
 70
    0
  9
$LTSCALE
 40
1
  9
$ATTMODE
 70
    0
  9
$TEXTSIZE
 40
2.5
  9
$TRACEWID
 40
15.68
  9
$TEXTSTYLE
  7
STANDARD
  9
$CLAYER
  8
0
  9
$CELTYPE
  6
BYLAYER
  9
$CECOLOR
 62
  256
  9
$CELTSCALE
 40
1
  9
$DISPSILH
 70
    0
  9
$DIMSCALE
 40
2.5
  9
$DIMASZ
 40
0.1
  9
$DIMEXO
 40
0.025
  9
$DIMDLI
 40
3.75
  9
$DIMRND
 40
0
  9
$DIMDLE
 40
0
  9
$DIMEXE
 40
0.05
  9
$DIMTP
 40
0
  9
$DIMTM
 40
0
  9
$DIMTXT
 40
0.1
  9
$DIMCEN
 40
2.5
  9
$DIMTSZ
 40
0
  9
$DIMTOL
 70
    0
  9
$DIMLIM
 70
    0
  9
$DIMTIH
 70
    0
  9
$DIMTOH
 70
    0
  9
$DIMSE1
 70
    0
  9
$DIMSE2
 70
    0
  9
$DIMTAD
 70
    1
  9
$DIMZIN
 70
    8
  9
$DIMBLK
  1

  9
$DIMASO
 70
    1
  9
$DIMSHO
 70
    1
  9
$DIMPOST
  1

  9
$DIMAPOST
  1

  9
$DIMALT
 70
    0
  9
$DIMALTD
 70
    3
  9
$DIMALTF
 40
0.03937
  9
$DIMLFAC
 40
1
  9
$DIMTOFL
 70
    1
  9
$DIMTVP
 40
0
  9
$DIMTIX
 70
    0
  9
$DIMSOXD
 70
    0
  9
$DIMSAH
 70
    0
  9
$DIMBLK1
  1

  9
$DIMBLK2
  1

  9
$DIMSTYLE
  2
STANDARD
  9
$DIMCLRD
 70
    0
  9
$DIMCLRE
 70
    0
  9
$DIMCLRT
 70
    0
  9
$DIMTFAC
 40
1
  9
$DIMGAP
 40
0.025
  9
$DIMJUST
 70
    0
  9
$DIMSD1
 70
    0
  9
$DIMSD2
 70
    0
  9
$DIMTOLJ
 70
    0
  9
$DIMTZIN
 70
    8
  9
$DIMALTZ
 70
    0
  9
$DIMALTTZ
 70
    0
  9
$DIMUPT
 70
    0
  9
$DIMDEC
 70
    2
  9
$DIMTDEC
 70
    2
  9
$DIMALTU
 70
    2
  9
$DIMALTTD
 70
    3
  9
$DIMTXSTY
  7
STANDARD
  9
$DIMAUNIT
 70
    0
  9
$DIMADEC
 70
    0
  9
$DIMALTRND
 40
0
  9
$DIMAZIN
 70
    0
  9
$DIMDSEP
 70
   44
  9
$DIMATFIT
 70
    3
  9
$DIMFRAC
 70
    0
  9
$DIMLDRBLK
  1
STANDARD
  9
$DIMLUNIT
 70
    2
  9
$DIMLWD
 70
   -2
  9
$DIMLWE
 70
   -2
  9
$DIMTMOVE
 70
    0
  9
$DIMFXL
 40
1
  9
$DIMFXLON
 70
    0
  9
$DIMJOGANG
 40
0.7854
  9
$DIMTFILL
 70
    0
  9
$DIMTFILLCLR
 70
    0
  9
$DIMARCSYM
 70
    0
  9
$DIMLTYPE
  6

  9
$DIMLTEX1
  6

  9
$DIMLTEX2
  6

  9
$LUNITS
 70
    2
  9
$LUPREC
 70
    4
  9
$SKETCHINC
 40
1
  9
$FILLETRAD
 40
0
  9
$AUNITS
 70
    0
  9
$AUPREC
 70
    2
  9
$MENU
  1
.
  9
$ELEVATION
 40
0
  9
$PELEVATION
 40
0
  9
$THICKNESS
 40
0
  9
$LIMCHECK
 70
    0
  9
$CHAMFERA
 40
0
  9
$CHAMFERB
 40
0
  9
$CHAMFERC
 40
0
  9
$CHAMFERD
 40
0
  9
$SKPOLY
 70
    0
  9
$USRTIMER
 70
    1
  9
$ANGBASE
 50
0
  9
$ANGDIR
 70
    0
  9
$PDMODE
 70
   34
  9
$PDSIZE
 40
0
  9
$PLINEWID
 40
0
  9
$SPLFRAME
 70
    0
  9
$SPLINETYPE
 70
    2
  9
$SPLINESEGS
 70
    8
  9
$HANDSEED
  5
20000
  9
$SURFTAB1
 70
    6
  9
$SURFTAB2
 70
    6
  9
$SURFTYPE
 70
    6
  9
$SURFU
 70
    6
  9
$SURFV
 70
    6
  9
$UCSBASE
  2

  9
$UCSNAME
  2

  9
$UCSORG
 10
0
 20
0
 30
0
  9
$UCSXDIR
 10
1
 20
0
 30
0
  9
$UCSYDIR
 10
0
 20
1
 30
0
  9
$UCSORTHOREF
  2

  9
$UCSORTHOVIEW
 70
    0
  9
$UCSORGTOP
 10
0
 20
0
 30
0
  9
$UCSORGBOTTOM
 10
0
 20
0
 30
0
  9
$UCSORGLEFT
 10
0
 20
0
 30
0
  9
$UCSORGRIGHT
 10
0
 20
0
 30
0
  9
$UCSORGFRONT
 10
0
 20
0
 30
0
  9
$UCSORGBACK
 10
0
 20
0
 30
0
  9
$PUCSBASE
  2

  9
$PUCSNAME
  2

  9
$PUCSORG
 10
0
 20
0
 30
0
  9
$PUCSXDIR
 10
1
 20
0
 30
0
  9
$PUCSYDIR
 10
0
 20
1
 30
0
  9
$PUCSORTHOREF
  2

  9
$PUCSORTHOVIEW
 70
    0
  9
$PUCSORGTOP
 10
0
 20
0
 30
0
  9
$PUCSORGBOTTOM
 10
0
 20
0
 30
0
  9
$PUCSORGLEFT
 10
0
 20
0
 30
0
  9
$PUCSORGRIGHT
 10
0
 20
0
 30
0
  9
$PUCSORGFRONT
 10
0
 20
0
 30
0
  9
$PUCSORGBACK
 10
0
 20
0
 30
0
  9
$USERI1
 70
    0
  9
$USERI2
 70
    0
  9
$USERI3
 70
    0
  9
$USERI4
 70
    0
  9
$USERI5
 70
    0
  9
$USERR1
 40
0
  9
$USERR2
 40
0
  9
$USERR3
 40
0
  9
$USERR4
 40
0
  9
$USERR5
 40
0
  9
$WORLDVIEW
 70
    1
  9
$SHADEDGE
 70
    3
  9
$SHADEDIF
 70
   70
  9
$TILEMODE
 70
    1
  9
$MAXACTVP
 70
   64
  9
$PINSBASE
 10
0
 20
0
 30
0
  9
$PLIMCHECK
 70
    0
  9
$PEXTMIN
 10
0
 20
0
 30
0
  9
$PEXTMAX
 10
0
 20
0
 30
0
  9
$SNAPSTYLE
 70
    0
  9
$PLIMMIN
 10
0
 20
0
  9
$PLIMMAX
 10
8.267716535433072
 20
11.69291338582677
  9
$UNITMODE
 70
    0
  9
$VISRETAIN
 70
    1
  9
$PLINEGEN
 70
    0
  9
$PSLTSCALE
 70
    1
  9
$TREEDEPTH
 70
 3020
  9
$CMLSTYLE
  2
Standard
  9
$CMLJUST
 70
    0
  9
$CMLSCALE
 40
20
  9
$PROXYGRAPHICS
 70
    1
  9
$MEASUREMENT
 70
    0
  9
$CELWEIGHT
370
   -1
  9
$ENDCAPS
280
    0
  9
$JOINSTYLE
280
    0
  9
$LWDISPLAY
290
    0
  9
$INSUNITS
 70
 ~a
  9
$HYPERLINKBASE
  1

  9
$STYLESHEET
  1

  9
$XEDIT
290
    1
  9
$CEPSNTYPE
380
    0
  9
$PSTYLEMODE
290
    1
  9
$EXTNAMES
290
    1
  9
$PSVPSCALE
 40
1
  9
$OLESTARTUP
290
    0
  9
$SORTENTS
280
  127
  9
$INDEXCTL
280
    0
  9
$HIDETEXT
280
    1
  9
$XCLIPFRAME
290
    0
  9
$HALOGAP
280
    0
  9
$OBSCOLOR
 70
  257
  9
$OBSLTYPE
280
    0
  9
$INTERSECTIONDISPLAY
280
    0
  9
$INTERSECTIONCOLOR
 70
  257
  9
$DIMASSOC
280
    1
  9
$PROJECTNAME
  1

  9
$CAMERADISPLAY
290
    0
  9
$LENSLENGTH
 40
50
  9
$CAMERAHEIGHT
 40
0
  9
$STEPSPERSEC
 40
2
  9
$STEPSIZE
 40
50
  9
$3DDWFPREC
 40
2
  9
$PSOLWIDTH
 40
5
  9
$PSOLHEIGHT
 40
80
  9
$LOFTANG1
 40
1.570796326794897
  9
$LOFTANG2
 40
1.570796326794897
  9
$LOFTMAG1
 40
0
  9
$LOFTMAG2
 40
0
  9
$LOFTPARAM
 70
    7
  9
$LOFTNORMALS
280
    1
  9
$LATITUDE
 40
1
  9
$LONGITUDE
 40
1
  9
$NORTHDIRECTION
 40
0
  9
$TIMEZONE
 70
-8000
  9
$LIGHTGLYPHDISPLAY
280
    1
  9
$TILEMODELIGHTSYNCH
280
    1
  9
$SOLIDHIST
280
    1
  9
$SHOWHIST
280
    1
  9
$DWFFRAME
280
    2
  9
$DGNFRAME
280
    0
  9
$REALWORLDSCALE
290
    1
  9
$INTERFERECOLOR
 62
    1
  9
$CSHADOW
280
    0
  9
$SHADOWPLANELOCATION
 40
0
  0
ENDSEC
  0
SECTION
  2
CLASSES
  0
ENDSEC
  0
SECTION
  2
TABLES
  0
TABLE
  2
VPORT
  5
8
330
0
100
AcDbSymbolTable
 70
    1
  0
VPORT
  5
31
330
2
100
AcDbSymbolTableRecord
100
AcDbViewportTableRecord
  2
*ACTIVE
 70
    0
 10
0
 20
0
 11
1
 21
1
 12
437.1800292291794
 22
147.7765401443901
 13
0
 23
0
 14
10
 24
10
 15
10
 25
10
 16
0
 26
0
 36
1
 17
0
 27
0
 37
0
 40
480.0408164085106
 41
1.71195652173913
 42
50
 43
0
 44
0
 50
0
 51
0
 71
    0
 72
  100
 73
    1
 74
    3
 75
    0
 76
    1
 77
    0
 78
    0
281
    0
 65
    1
110
0
120
0
130
0
111
1
121
0
131
0
112
0
122
1
132
0
 79
    0
146
0
348
10020
 60
    7
 61
    5
292
1
282
    1
141
0
142
0
 63
  250
421
3358443
  0
ENDTAB
  0
TABLE
  2
LTYPE
  5
5
330
0
100
AcDbSymbolTable
 70
    4
  0
LTYPE
  5
14
330
5
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
ByBlock
 70
    0
  3

 72
   65
 73
    0
 40
0
  0
LTYPE
  5
15
330
5
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
ByLayer
 70
    0
  3

 72
   65
 73
    0
 40
0
  0
LTYPE
  5
16
330
5
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
Continuous
 70
    0
  3
Solid line
 72
   65
 73
    0
 40
0
  0
LTYPE
  5
32
330
5
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DOT
 70
    0
  3
Dot . . . . . . . . . . . . . . . . . . . . . .
 72
   65
 73
    2
 40
6.35
 49
0
 74
    0
 49
-6.35
 74
    0
  0
LTYPE
  5
33
330
5
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DOTTINY
 70
    0
  3
Dot (.15x) .....................................
 72
   65
 73
    2
 40
0.9525
 49
0
 74
    0
 49
-0.9525
 74
    0
  0
LTYPE
  5
34
330
5
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DOT2
 70
    0
  3
Dot (.5x) .....................................
 72
   65
 73
    2
 40
3.175
 49
0
 74
    0
 49
-3.175
 74
    0
  0
LTYPE
  5
35
330
5
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DOTX2
 70
    0
  3
Dot (2x) .  .  .  .  .  .  .  .  .  .  .  .  .
 72
   65
 73
    2
 40
12.7
 49
0
 74
    0
 49
-12.7
 74
    0
  0
LTYPE
  5
36
330
5
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DASHED
 70
    0
  3
Dashed _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
 72
   65
 73
    2
 40
19.05
 49
12.7
 74
    0
 49
-6.35
 74
    0
  0
LTYPE
  5
37
330
5
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DASHEDTINY
 70
    0
  3
Dashed (.15x) _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
 72
   65
 73
    2
 40
2.8575
 49
1.905
 74
    0
 49
-0.9525
 74
    0
  0
LTYPE
  5
38
330
5
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DASHED2
 70
    0
  3
Dashed (.5x) _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
 72
   65
 73
    2
 40
9.524999999999999
 49
6.35
 74
    0
 49
-3.175
 74
    0
  0
LTYPE
  5
39
330
5
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DASHEDX2
 70
    0
  3
Dashed (2x) ____  ____  ____  ____  ____  ___
 72
   65
 73
    2
 40
38.09999999999999
 49
25.4
 74
    0
 49
-12.7
 74
    0
  0
LTYPE
  5
3A
330
5
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DASHDOT
 70
    0
  3
Dash dot __ . __ . __ . __ . __ . __ . __ . __
 72
   65
 73
    4
 40
25.4
 49
12.7
 74
    0
 49
-6.35
 74
    0
 49
0
 74
    0
 49
-6.35
 74
    0
  0
LTYPE
  5
3B
330
5
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DASHDOTTINY
 70
    0
  3
Dash dot (.15x) _._._._._._._._._._._._._._._.
 72
   65
 73
    4
 40
3.81
 49
1.905
 74
    0
 49
-0.9525
 74
    0
 49
0
 74
    0
 49
-0.9525
 74
    0
  0
LTYPE
  5
3C
330
5
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DASHDOT2
 70
    0
  3
Dash dot (.5x) _._._._._._._._._._._._._._._.
 72
   65
 73
    4
 40
12.7
 49
6.35
 74
    0
 49
-3.175
 74
    0
 49
0
 74
    0
 49
-3.175
 74
    0
  0
LTYPE
  5
3D
330
5
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DASHDOTX2
 70
    0
  3
Dash dot (2x) ____  .  ____  .  ____  .  ___
 72
   65
 73
    4
 40
50.8
 49
25.4
 74
    0
 49
-12.7
 74
    0
 49
0
 74
    0
 49
-12.7
 74
    0
  0
LTYPE
  5
3E
330
5
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DIVIDE
 70
    0
  3
Divide ____ . . ____ . . ____ . . ____ . . ____
 72
   65
 73
    6
 40
31.75
 49
12.7
 74
    0
 49
-6.35
 74
    0
 49
0
 74
    0
 49
-6.35
 74
    0
 49
0
 74
    0
 49
-6.35
 74
    0
  0
LTYPE
  5
3F
330
5
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DIVIDETINY
 70
    0
  3
Divide (.15x) __..__..__..__..__..__..__..__.._
 72
   65
 73
    6
 40
4.7625
 49
1.905
 74
    0
 49
-0.9525
 74
    0
 49
0
 74
    0
 49
-0.9525
 74
    0
 49
0
 74
    0
 49
-0.9525
 74
    0
  0
LTYPE
  5
40
330
5
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DIVIDE2
 70
    0
  3
Divide (.5x) __..__..__..__..__..__..__..__.._
 72
   65
 73
    6
 40
15.875
 49
6.35
 74
    0
 49
-3.175
 74
    0
 49
0
 74
    0
 49
-3.175
 74
    0
 49
0
 74
    0
 49
-3.175
 74
    0
  0
LTYPE
  5
41
330
5
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DIVIDEX2
 70
    0
  3
Divide (2x) ________  .  .  ________  .  .  _
 72
   65
 73
    6
 40
63.5
 49
25.4
 74
    0
 49
-12.7
 74
    0
 49
0
 74
    0
 49
-12.7
 74
    0
 49
0
 74
    0
 49
-12.7
 74
    0
  0
LTYPE
  5
42
330
5
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
BORDER
 70
    0
  3
Border __ __ . __ __ . __ __ . __ __ . __ __ .
 72
   65
 73
    6
 40
44.45
 49
12.7
 74
    0
 49
-6.35
 74
    0
 49
12.7
 74
    0
 49
-6.35
 74
    0
 49
0
 74
    0
 49
-6.35
 74
    0
  0
LTYPE
  5
43
330
5
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
BORDERTINY
 70
    0
  3
Border (.15x) __.__.__.__.__.__.__.__.__.__.__.
 72
   65
 73
    6
 40
6.6675
 49
1.905
 74
    0
 49
-0.9525
 74
    0
 49
1.905
 74
    0
 49
-0.9525
 74
    0
 49
0
 74
    0
 49
-0.9525
 74
    0
  0
LTYPE
  5
44
330
5
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
BORDER2
 70
    0
  3
Border (.5x) __.__.__.__.__.__.__.__.__.__.__.
 72
   65
 73
    6
 40
22.225
 49
6.35
 74
    0
 49
-3.175
 74
    0
 49
6.35
 74
    0
 49
-3.175
 74
    0
 49
0
 74
    0
 49
-3.175
 74
    0
  0
LTYPE
  5
45
330
5
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
BORDERX2
 70
    0
  3
Border (2x) ____  ____  .  ____  ____  .  ___
 72
   65
 73
    6
 40
88.89999999999999
 49
25.4
 74
    0
 49
-12.7
 74
    0
 49
25.4
 74
    0
 49
-12.7
 74
    0
 49
0
 74
    0
 49
-12.7
 74
    0
  0
LTYPE
  5
46
330
5
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
CENTER
 70
    0
  3
Center ____ _ ____ _ ____ _ ____ _ ____ _ ____
 72
   65
 73
    4
 40
50.8
 49
31.75
 74
    0
 49
-6.35
 74
    0
 49
6.35
 74
    0
 49
-6.35
 74
    0
  0
LTYPE
  5
47
330
5
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
CENTERTINY
 70
    0
  3
Center (.15x) ___ _ ___ _ ___ _ ___ _ ___ _ ___
 72
   65
 73
    4
 40
7.62
 49
4.7625
 74
    0
 49
-0.9525
 74
    0
 49
0.9525
 74
    0
 49
-0.9525
 74
    0
  0
LTYPE
  5
48
330
5
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
CENTER2
 70
    0
  3
Center (.5x) ___ _ ___ _ ___ _ ___ _ ___ _ ___
 72
   65
 73
    4
 40
28.575
 49
19.05
 74
    0
 49
-3.175
 74
    0
 49
3.175
 74
    0
 49
-3.175
 74
    0
  0
LTYPE
  5
49
330
5
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
CENTERX2
 70
    0
  3
Center (2x) ________  __  ________  __  _____
 72
   65
 73
    4
 40
101.6
 49
63.5
 74
    0
 49
-12.7
 74
    0
 49
12.7
 74
    0
 49
-12.7
 74
    0
  0
ENDTAB
  0
TABLE
  2
LAYER
  5
2
330
0
100
AcDbSymbolTable
 70
    1
  0
LAYER
  5
10
330
2
100
AcDbSymbolTableRecord
100
AcDbLayerTableRecord
  2
0
 70
    0
 62
    7
  6
CONTINUOUS
370
    0
390
F
  0
ENDTAB
  0
TABLE
  2
STYLE
  5
3
330
0
100
AcDbSymbolTable
 70
    3
  0
STYLE
  5
4A
330
2
100
AcDbSymbolTableRecord
100
AcDbTextStyleTableRecord
  2
Standard
 70
    0
 40
0
 41
1
 50
0
 71
    0
 42
1
  3
txt
  4

  0
ENDTAB
  0
TABLE
  2
VIEW
  5
6
330
0
100
AcDbSymbolTable
 70
    0
  0
ENDTAB
  0
TABLE
  2
UCS
  5
7
330
0
100
AcDbSymbolTable
 70
    0
  0
ENDTAB
  0
TABLE
  2
APPID
  5
9
330
0
100
AcDbSymbolTable
 70
    1
  0
APPID
  5
12
330
9
100
AcDbSymbolTableRecord
100
AcDbRegAppTableRecord
  2
ACAD
 70
    0
  0
APPID
  5
4B
330
9
100
AcDbSymbolTableRecord
100
AcDbRegAppTableRecord
  2
LibreCad
 70
    0
  0
ENDTAB
  0
TABLE
  2
DIMSTYLE
  5
A
330
0
100
AcDbSymbolTable
 70
    1
100
AcDbDimStyleTable
 71
    1
  0
DIMSTYLE
105
4C
330
A
100
AcDbSymbolTableRecord
100
AcDbDimStyleTableRecord
  2
Standard
 70
    0
 40
1
 41
0.1
 42
0.025
 43
0.38
 44
0.05
 45
0
 46
0
 47
0
 48
0
 49
1
140
0.1
141
0.09
142
2.5
143
25.4
144
1
145
0
146
1
147
0.025
148
0
 71
    0
 72
    0
 73
    0
 74
    1
 75
    0
 76
    0
 77
    0
 78
    1
 79
    0
170
    0
171
    2
172
    0
173
    0
174
    0
175
    0
176
    0
177
    0
178
    0
179
    0
271
    2
272
    4
273
    2
274
    2
275
    0
276
    0
277
    2
278
    0
279
    0
280
    0
281
    0
282
    0
283
    1
284
    0
285
    0
286
    0
288
    0
289
    3
340
standard
341

371
   -2
372
   -2
  0
ENDTAB
  0
TABLE
  2
BLOCK_RECORD
  5
1
330
0
100
AcDbSymbolTable
 70
    2
  0
BLOCK_RECORD
  5
1F
330
1
100
AcDbSymbolTableRecord
100
AcDbBlockTableRecord
  2
*Model_Space
 70
    0
280
    1
281
    0
  0
BLOCK_RECORD
  5
1E
330
1
100
AcDbSymbolTableRecord
100
AcDbBlockTableRecord
  2
*Paper_Space
 70
    0
280
    1
281
    0
  0
ENDTAB
  0
ENDSEC
  0
SECTION
  2
BLOCKS
  0
BLOCK
  5
20
330
1F
100
AcDbEntity
  8
0
100
AcDbBlockBegin
  2
*Model_Space
 70
    0
 10
0
 20
0
 30
0
  3
*Model_Space
  1

  0
ENDBLK
  5
21
330
1F
100
AcDbEntity
  8
0
100
AcDbBlockEnd
  0
BLOCK
  5
1C
330
1B
100
AcDbEntity
  8
0
100
AcDbBlockBegin
  2
*Paper_Space
 70
    0
 10
0
 20
0
 30
0
  3
*Paper_Space
  1

  0
ENDBLK
  5
1D
330
1F
100
AcDbEntity
  8
0
100
AcDbBlockEnd
  0
ENDSEC
  0
SECTION
  2
ENTITIES
"
  )

(defparameter *dxf-footer-lcad*
  " 0
ENDSEC
  0
SECTION
  2
OBJECTS
  0
DICTIONARY
  5
C
330
0
100
AcDbDictionary
281
    1
  3
ACAD_GROUP
350
D
  0
DICTIONARY
  5
D
330
C
100
AcDbDictionary
281
    1
  0
PLOTSETTINGS
  5
50
100
AcDbPlotSettings
  6
1x1
 40
0
 41
0
 42
0
 43
0
  0
ENDSEC
  0
EOF")





(defparameter *dxf-header-new*
  "  0
SECTION
  2
HEADER
  9
$ACADVER
  1
AC1015
  9
$HANDSEED
  5
FFFF
  9
$DIMADEC
 70
0
  9
$DIMASZ
 40
0.18
  9
$DIMAUNIT
 70
0
  9
$DIMAZIN
 70
0
  9
$DIMDEC
 70
4
  9
$DIMDSEP
 70
46
  9
$DIMEXE
 40
0.18
  9
$DIMEXO
 40
0.0625
  9
$DIMGAP
 40
0.09
  9
$DIMLUNIT
 70
2
  9
$DIMSCALE
 40
1.0
  9
$DIMTSZ
 40
0.0
  9
$DIMTXT
 40
0.18
  9
$DIMZIN
 70
0
  9
$DWGCODEPAGE
  3
ANSI_1252
  9
$INSUNITS
 70
~a
  9
$LTSCALE
 40
1.0
  9
$MAXACTVP
 70
32
  9
$MEASUREMENT
 70
0
  9
$PDMODE
 70
0
  9
$PDSIZE
 40
0
  0
ENDSEC
  0
SECTION
  2
TABLES
  0
TABLE
  2
VPORT
  5
8
100
AcDbSymbolTable
 70
1
  0
VPORT
  5
30
100
AcDbSymbolTableRecord
100
AcDbViewportTableRecord
  2
*Active
 70
0
 10
0.0
 20
0.0
 11
1.0
 21
1.0
 12
286.3055555555554861
 22
148.5
 13
0.0
 23
0.0
 14
10.0
 24
10.0
 15
10.0
 25
10.0
 16
0.0
 26
0.0
 36
1.0
 17
0.0
 27
0.0
 37
0.0
 40
297.0
 41
1.92798353909465
 42
50.0
 43
0.0
 44
0.0
 50
0.0
 51
0.0
 71
0
 72
100
 73
1
 74
3
 75
1
 76
1
 77
0
 78
0
281
0
 65
1
110
0.0
120
0.0
130
0.0
111
1.0
121
0.0
131
0.0
112
0.0
122
1.0
132
0.0
 79
0
146
0.0
  0
ENDTAB
  0
TABLE
  2
LTYPE
  5
5
100
AcDbSymbolTable
 70
50
  0
LTYPE
  5
16
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
Continuous
 70
0
  3
Solid line
 72
65
 73
0
 40
0.0
  0
LTYPE
  5
15
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
BYLAYER
 70
0
  3

 72
65
 73
0
 40
0.0
  0
LTYPE
  5
31
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
ACAD_ISO15W100
 70
0
  3
ISO double-dash triple-dot __ __ . . . __ __ . .
 72
65
 73
10
 40
39.0
 49
12.0
 74
0
 49
-3.0
 74
0
 49
12.0
 74
0
 49
-3.0
 74
0
 49
0.0
 74
0
 49
-3.0
 74
0
 49
0.0
 74
0
 49
-3.0
 74
0
 49
0.0
 74
0
 49
-3.0
 74
0
  0
LTYPE
  5
32
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
CENTER2
 70
0
  3
Center (.5x) ___ _ ___ _ ___ _ ___ _ ___ _ ___
 72
65
 73
4
 40
28.5750000000000028
 49
19.0500000000000007
 74
0
 49
-3.1749999999999998
 74
0
 49
3.1749999999999998
 74
0
 49
-3.1749999999999998
 74
0
  0
LTYPE
  5
33
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
ACAD_ISO07W100
 70
0
  3
ISO dot . . . . . . . . . . . . . . . . . . . . 
 72
65
 73
2
 40
3.0
 49
0.0
 74
0
 49
-3.0
 74
0
  0
LTYPE
  5
34
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
BORDERX2
 70
0
  3
Border (2x) ____  ____  .  ____  ____  .  ___
 72
65
 73
6
 40
88.8999999999999915
 49
25.3999999999999986
 74
0
 49
-12.6999999999999993
 74
0
 49
25.3999999999999986
 74
0
 49
-12.6999999999999993
 74
0
 49
0.0
 74
0
 49
-12.6999999999999993
 74
0
  0
LTYPE
  5
35
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
ACAD_ISO14W100
 70
0
  3
ISO dash triple-dot __ . . . __ . . . __ . . . _
 72
65
 73
8
 40
24.0
 49
12.0
 74
0
 49
-3.0
 74
0
 49
0.0
 74
0
 49
-3.0
 74
0
 49
0.0
 74
0
 49
-3.0
 74
0
 49
0.0
 74
0
 49
-3.0
 74
0
  0
LTYPE
  5
36
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
ACAD_ISO06W100
 70
0
  3
ISO long-dash triple-dot ____ ... ____ ... ____
 72
65
 73
8
 40
36.0
 49
24.0
 74
0
 49
-3.0
 74
0
 49
0.0
 74
0
 49
-3.0
 74
0
 49
0.0
 74
0
 49
-3.0
 74
0
 49
0.0
 74
0
 49
-3.0
 74
0
  0
LTYPE
  5
37
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
PHANTOM2
 70
0
  3
Phantom (.5x) ___ _ _ ___ _ _ ___ _ _ ___ _ _
 72
65
 73
6
 40
31.7500000000000036
 49
15.875
 74
0
 49
-3.1749999999999998
 74
0
 49
3.1749999999999998
 74
0
 49
-3.1749999999999998
 74
0
 49
3.1749999999999998
 74
0
 49
-3.1749999999999998
 74
0
  0
LTYPE
  5
38
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
ACAD_ISO13W100
 70
0
  3
ISO double-dash double-dot __ __ . . __ __ . . _
 72
65
 73
8
 40
36.0
 49
12.0
 74
0
 49
-3.0
 74
0
 49
12.0
 74
0
 49
-3.0
 74
0
 49
0.0
 74
0
 49
-3.0
 74
0
 49
0.0
 74
0
 49
-3.0
 74
0
  0
LTYPE
  5
39
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
ACAD_ISO05W100
 70
0
  3
ISO long-dash double-dot ____ .. ____ .. ____ . 
 72
65
 73
6
 40
33.0
 49
24.0
 74
0
 49
-3.0
 74
0
 49
0.0
 74
0
 49
-3.0
 74
0
 49
0.0
 74
0
 49
-3.0
 74
0
  0
LTYPE
  5
3A
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DASHDOTX2
 70
0
  3
Dash dot (2x) ____  .  ____  .  ____  .  ___
 72
65
 73
4
 40
50.7999999999999972
 49
25.3999999999999986
 74
0
 49
-12.6999999999999993
 74
0
 49
0.0
 74
0
 49
-12.6999999999999993
 74
0
  0
LTYPE
  5
3B
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
HIDDENX2
 70
0
  3
Hidden (2x) ____ ____ ____ ____ ____ ____ ____ 
 72
65
 73
2
 40
19.0499999999999972
 49
12.6999999999999993
 74
0
 49
-6.3499999999999996
 74
0
  0
LTYPE
  5
3C
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
PHANTOM
 70
0
  3
Phantom ______  __  __  ______  __  __  ______ 
 72
65
 73
6
 40
63.5000000000000071
 49
31.75
 74
0
 49
-6.3499999999999996
 74
0
 49
6.3499999999999996
 74
0
 49
-6.3499999999999996
 74
0
 49
6.3499999999999996
 74
0
 49
-6.3499999999999996
 74
0
  0
LTYPE
  5
3D
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
FENCELINE1
 70
0
  3
Fenceline circle ----0-----0----0-----0----0-----0--
 72
65
 73
4
 40
36.8299999999999983
 49
6.3499999999999996
 74
0
 49
-2.54
 74
0
 49
-2.54
 74
0
 49
25.3999999999999986
 74
0
  0
LTYPE
  5
3E
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
FENCELINE2
 70
0
  3
Fenceline square ----[]-----[]----[]-----[]----[]---
 72
65
 73
4
 40
36.8299999999999983
 49
6.3499999999999996
 74
0
 49
-2.54
 74
0
 49
-2.54
 74
0
 49
25.3999999999999986
 74
0
  0
LTYPE
  5
3F
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DASHEDX2
 70
0
  3
Dashed (2x) ____  ____  ____  ____  ____  ___
 72
65
 73
2
 40
38.0999999999999943
 49
25.3999999999999986
 74
0
 49
-12.6999999999999993
 74
0
  0
LTYPE
  5
40
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
ACAD_ISO12W100
 70
0
  3
ISO dash double-dot __ . . __ . . __ . . __ . . 
 72
65
 73
6
 40
21.0
 49
12.0
 74
0
 49
-3.0
 74
0
 49
0.0
 74
0
 49
-3.0
 74
0
 49
0.0
 74
0
 49
-3.0
 74
0
  0
LTYPE
  5
41
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
CENTER
 70
0
  3
Center ____ _ ____ _ ____ _ ____ _ ____ _ ____
 72
65
 73
4
 40
50.8000000000000043
 49
31.75
 74
0
 49
-6.3499999999999996
 74
0
 49
6.3499999999999996
 74
0
 49
-6.3499999999999996
 74
0
  0
LTYPE
  5
42
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DRAINAGE
 70
0
  3
Drainage ---->---->---->----
 72
65
 73
2
 40
10.1600000000000001
 49
5.0800000000000001
 74
0
 49
5.0800000000000001
 74
0
  0
LTYPE
  5
43
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
ACAD_ISO04W100
 70
0
  3
ISO long-dash dot ____ . ____ . ____ . ____ . _
 72
65
 73
4
 40
30.0
 49
24.0
 74
0
 49
-3.0
 74
0
 49
0.0
 74
0
 49
-3.0
 74
0
  0
LTYPE
  5
44
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
BORDER2
 70
0
  3
Border (.5x) __.__.__.__.__.__.__.__.__.__.__.
 72
65
 73
6
 40
22.2249999999999979
 49
6.3499999999999996
 74
0
 49
-3.1749999999999998
 74
0
 49
6.3499999999999996
 74
0
 49
-3.1749999999999998
 74
0
 49
0.0
 74
0
 49
-3.1749999999999998
 74
0
  0
LTYPE
  5
45
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DIVIDE
 70
0
  3
Divide ____ . . ____ . . ____ . . ____ . . ____
 72
65
 73
6
 40
31.75
 49
12.6999999999999993
 74
0
 49
-6.3499999999999996
 74
0
 49
0.0
 74
0
 49
-6.3499999999999996
 74
0
 49
0.0
 74
0
 49
-6.3499999999999996
 74
0
  0
LTYPE
  5
46
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DASHED2
 70
0
  3
Dashed (.5x) _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
 72
65
 73
2
 40
9.5249999999999986
 49
6.3499999999999996
 74
0
 49
-3.1749999999999998
 74
0
  0
LTYPE
  5
47
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DASHED
 70
0
  3
Dashed __ __ __ __ __ __ __ __ __ __ __ __ __ _
 72
65
 73
2
 40
19.0499999999999972
 49
12.6999999999999993
 74
0
 49
-6.3499999999999996
 74
0
  0
LTYPE
  5
48
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
PHANTOMX2
 70
0
  3
Phantom (2x) ____________    ____    ____   _
 72
65
 73
6
 40
127.0000000000000142
 49
63.5
 74
0
 49
-12.6999999999999993
 74
0
 49
12.6999999999999993
 74
0
 49
-12.6999999999999993
 74
0
 49
12.6999999999999993
 74
0
 49
-12.6999999999999993
 74
0
  0
LTYPE
  5
49
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
ACAD_ISO11W100
 70
0
  3
ISO double-dash dot __ __ . __ __ . __ __ . __ _
 72
65
 73
6
 40
33.0
 49
12.0
 74
0
 49
-3.0
 74
0
 49
12.0
 74
0
 49
-3.0
 74
0
 49
0.0
 74
0
 49
-3.0
 74
0
  0
LTYPE
  5
4A
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
ACAD_ISO03W100
 70
0
  3
ISO dash space __    __    __    __    __    __
 72
65
 73
2
 40
30.0
 49
12.0
 74
0
 49
-18.0
 74
0
  0
LTYPE
  5
4B
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
HIDDEN2
 70
0
  3
Hidden (.5x) _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
 72
65
 73
2
 40
4.7624999999999993
 49
3.1749999999999998
 74
0
 49
-1.5874999999999999
 74
0
  0
LTYPE
  5
4C
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DIVIDEX2
 70
0
  3
Divide (2x) ________  .  .  ________  .  .  _
 72
65
 73
6
 40
63.5
 49
25.3999999999999986
 74
0
 49
-12.6999999999999993
 74
0
 49
0.0
 74
0
 49
-12.6999999999999993
 74
0
 49
0.0
 74
0
 49
-12.6999999999999993
 74
0
  0
LTYPE
  5
4D
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
TRACKS
 70
0
  3
Tracks -|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-
 72
65
 73
2
 40
7.6200000000000001
 49
3.8100000000000001
 74
0
 49
3.8100000000000001
 74
0
  0
LTYPE
  5
4E
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
HOT_WATER_SUPPLY
 70
0
  3
Hot water supply ---- HW ---- HW ---- HW ----
 72
65
 73
3
 40
22.8599999999999994
 49
12.6999999999999993
 74
0
 49
-5.0800000000000001
 74
0
 49
-5.0800000000000001
 74
0
  0
LTYPE
  5
4F
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
ACAD_ISO10W100
 70
0
  3
ISO dash dot __ . __ . __ . __ . __ . __ . __ . 
 72
65
 73
4
 40
18.0
 49
12.0
 74
0
 49
-3.0
 74
0
 49
0.0
 74
0
 49
-3.0
 74
0
  0
LTYPE
  5
50
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DOTX2
 70
0
  3
Dot (2x) .  .  .  .  .  .  .  .  .  .  .  .  .  .
 72
65
 73
2
 40
12.6999999999999993
 49
0.0
 74
0
 49
-12.6999999999999993
 74
0
  0
LTYPE
  5
51
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
ACAD_ISO02W100
 70
0
  3
ISO dash __ __ __ __ __ __ __ __ __ __ __ __ __
 72
65
 73
2
 40
15.0
 49
12.0
 74
0
 49
-3.0
 74
0
  0
LTYPE
  5
52
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
BATTING
 70
0
  3
Batting SSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSS
 72
65
 73
4
 40
10.1625399999999999
 49
0.00254
 74
0
 49
-2.54
 74
0
 49
-5.0800000000000001
 74
0
 49
-2.54
 74
0
  0
LTYPE
  5
53
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
BORDER
 70
0
  3
Border __ __ . __ __ . __ __ . __ __ . __ __ .
 72
65
 73
6
 40
44.4499999999999957
 49
12.6999999999999993
 74
0
 49
-6.3499999999999996
 74
0
 49
12.6999999999999993
 74
0
 49
-6.3499999999999996
 74
0
 49
0.0
 74
0
 49
-6.3499999999999996
 74
0
  0
LTYPE
  5
54
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DASHDOT2
 70
0
  3
Dash dot (.5x) _._._._._._._._._._._._._._._.
 72
65
 73
4
 40
12.6999999999999993
 49
6.3499999999999996
 74
0
 49
-3.1749999999999998
 74
0
 49
0.0
 74
0
 49
-3.1749999999999998
 74
0
  0
LTYPE
  5
14
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
BYBLOCK
 70
0
  3

 72
65
 73
0
 40
0.0
  0
LTYPE
  5
55
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DASHDOT
 70
0
  3
Dash dot __ . __ . __ . __ . __ . __ . __ . __
 72
65
 73
4
 40
25.3999999999999986
 49
12.6999999999999993
 74
0
 49
-6.3499999999999996
 74
0
 49
0.0
 74
0
 49
-6.3499999999999996
 74
0
  0
LTYPE
  5
56
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DOT
 70
0
  3
Dot . . . . . . . . . . . . . . . . . . . . . . . .
 72
65
 73
2
 40
6.3499999999999996
 49
0.0
 74
0
 49
-6.3499999999999996
 74
0
  0
LTYPE
  5
57
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
HIDDEN
 70
0
  3
Hidden __ __ __ __ __ __ __ __ __ __ __ __ __ __
 72
65
 73
2
 40
9.5249999999999986
 49
6.3499999999999996
 74
0
 49
-3.1749999999999998
 74
0
  0
LTYPE
  5
58
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
ACAD_ISO09W100
 70
0
  3
ISO long-dash double-short-dash ____ __ __ ____
 72
65
 73
6
 40
45.0
 49
24.0
 74
0
 49
-3.0
 74
0
 49
6.0
 74
0
 49
-3.0
 74
0
 49
6.0
 74
0
 49
-3.0
 74
0
  0
LTYPE
  5
59
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DRAINAGE2
 70
0
  3
Drainage reversed----<----<----<----
 72
65
 73
2
 40
10.1600000000000001
 49
5.0800000000000001
 74
0
 49
5.0800000000000001
 74
0
  0
LTYPE
  5
5A
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
CENTERX2
 70
0
  3
Center (2x) ________  __  ________  __  _____
 72
65
 73
4
 40
101.6000000000000085
 49
63.5
 74
0
 49
-12.6999999999999993
 74
0
 49
12.6999999999999993
 74
0
 49
-12.6999999999999993
 74
0
  0
LTYPE
  5
5B
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DIVIDE2
 70
0
  3
Divide (.5x) __..__..__..__..__..__..__..__.._
 72
65
 73
6
 40
15.875
 49
6.3499999999999996
 74
0
 49
-3.1749999999999998
 74
0
 49
0.0
 74
0
 49
-3.1749999999999998
 74
0
 49
0.0
 74
0
 49
-3.1749999999999998
 74
0
  0
LTYPE
  5
5C
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
ACAD_ISO08W100
 70
0
  3
ISO long-dash short-dash ____ __ ____ __ ____ _
 72
65
 73
4
 40
36.0
 49
24.0
 74
0
 49
-3.0
 74
0
 49
6.0
 74
0
 49
-3.0
 74
0
  0
LTYPE
  5
5D
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
GAS_LINE
 70
0
  3
Gas line ----GAS----GAS----GAS----GAS----GAS----GAS--
 72
65
 73
3
 40
24.1300000000000026
 49
12.6999999999999993
 74
0
 49
-5.0800000000000001
 74
0
 49
-6.3499999999999996
 74
0
  0
LTYPE
  5
5E
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
DOT2
 70
0
  3
Dot (.5x) ........................................
 72
65
 73
2
 40
3.1749999999999998
 49
0.0
 74
0
 49
-3.1749999999999998
 74
0
  0
LTYPE
  5
5F
100
AcDbSymbolTableRecord
100
AcDbLinetypeTableRecord
  2
ZIGZAG
 70
0
  3
Zig zag /\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/
 72
65
 73
4
 40
20.32254
 49
0.00254
 74
0
 49
-5.0800000000000001
 74
0
 49
-10.1600000000000001
 74
0
 49
-5.0800000000000001
 74
0
  0
ENDTAB
  0
TABLE
  2
LAYER
  5
2
100
AcDbSymbolTable
 70
2
  0
LAYER
  5
60
100
AcDbSymbolTableRecord
100
AcDbLayerTableRecord
  2
Main
 70
0
 62
0
  6
BYLAYER
370
5
390
F
  0
LAYER
  5
10
100
AcDbSymbolTableRecord
100
AcDbLayerTableRecord
  2
0
 70
0
 62
7
420
16777215
  6
Continuous
370
25
390
F
  0
ENDTAB
  0
TABLE
  2
STYLE
  5
3
100
AcDbSymbolTable
 70
4
  0
STYLE
  5
61
100
AcDbSymbolTableRecord
100
AcDbTextStyleTableRecord
  2
Standard
 70
0
 40
0.0
 41
1.0
 50
0.0
 71
0
 42
2.5
  3

  4

1001
ACAD
1000
txt
1071
0
  0
STYLE
  5
62
100
AcDbSymbolTableRecord
100
AcDbTextStyleTableRecord
  2
textstyle0
 70
0
 40
0.0
 41
1.0
 50
0.0
 71
0
 42
12.0
  3

  4

1001
ACAD
1000
textstyle2
1071
0
  0
STYLE
  5
63
100
AcDbSymbolTableRecord
100
AcDbTextStyleTableRecord
  2
textstyle1
 70
0
 40
0.0
 41
1.0
 50
0.0
 71
0
 42
12.0
  3

  4

1001
ACAD
1000
textstyle1
1071
0
  0
STYLE
  5
64
100
AcDbSymbolTableRecord
100
AcDbTextStyleTableRecord
  2
textstyle2
 70
0
 40
0.0
 41
1.0
 50
0.0
 71
0
 42
20.0
  3

  4

1001
ACAD
1000
textstyle4
1071
0
  0
ENDTAB
  0
TABLE
  2
VIEW
  5
6
100
AcDbSymbolTable
 70
0
  0
ENDTAB
  0
TABLE
  2
UCS
  5
7
100
AcDbSymbolTable
 70
0
  0
ENDTAB
  0
TABLE
  2
APPID
  5
9
100
AcDbSymbolTable
 70
1
  0
APPID
  5
12
100
AcDbSymbolTableRecord
100
AcDbRegAppTableRecord
  2
ACAD
 70
0
  0
APPID
  5
65
100
AcDbSymbolTableRecord
100
AcDbRegAppTableRecord
  2
QCAD
 70
0
  0
ENDTAB
  0
TABLE
  2
DIMSTYLE
  5
A
100
AcDbSymbolTable
 70
1
100
AcDbDimStyleTable
 71
0
  0
DIMSTYLE
105
27
100
AcDbSymbolTableRecord
100
AcDbDimStyleTableRecord
  2
Standard
 41
0.18
 42
0.0625
 43
3.75
 44
0.18
 70
0
 73
0
 74
0
 77
1
 78
8
140
0.18
141
2.5
143
0.03937007874016
147
0.09
171
3
172
1
271
2
272
2
274
3
278
44
283
0
284
8
340
61
  0
ENDTAB
  0
TABLE
  2
BLOCK_RECORD
  5
1
100
AcDbSymbolTable
 70
1
  0
BLOCK_RECORD
  5
1F
100
AcDbSymbolTableRecord
100
AcDbBlockTableRecord
  2
*Model_Space
340
22
  0
BLOCK_RECORD
  5
1B
100
AcDbSymbolTableRecord
100
AcDbBlockTableRecord
  2
*Paper_Space
340
1E
  0
BLOCK_RECORD
  5
23
100
AcDbSymbolTableRecord
100
AcDbBlockTableRecord
  2
*Paper_Space0
340
26
  0
ENDTAB
  0
ENDSEC
  0
SECTION
  2
BLOCKS
  0
BLOCK
  5
20
100
AcDbEntity
  8
0
100
AcDbBlockBegin
  2
*Model_Space
 70
0
 10
0.0
 20
0.0
 30
0.0
  3
*Model_Space
  1

  0
ENDBLK
  5
21
100
AcDbEntity
  8
0
100
AcDbBlockEnd
  0
BLOCK
  5
1C
100
AcDbEntity
 67
1
  8
0
100
AcDbBlockBegin
  2
*Paper_Space
 70
0
 10
0.0
 20
0.0
 30
0.0
  3
*Paper_Space
  1

  0
ENDBLK
  5
1D
100
AcDbEntity
 67
1
  8
0
100
AcDbBlockEnd
  0
BLOCK
  5
24
100
AcDbEntity
  8
0
100
AcDbBlockBegin
  2
*Paper_Space0
 70
0
 10
0.0
 20
0.0
 30
0.0
  3
*Paper_Space0
  1

  0
ENDBLK
  5
25
100
AcDbEntity
  8
0
100
AcDbBlockEnd
  0
ENDSEC
  0
SECTION
  2
ENTITIES
")


(defparameter *dxf-header* *dxf-header-new*)


(defparameter *dxf-footer-new*
  "  0
ENDSEC
  0
SECTION
  2
OBJECTS
  0
DICTIONARY
  5
C
100
AcDbDictionary
280
0
281
1
  3
ACAD_GROUP
350
D
  3
ACAD_LAYOUT
350
1A
  3
ACAD_MLINESTYLE
350
17
  3
ACAD_PLOTSETTINGS
350
19
  3
ACAD_PLOTSTYLENAME
350
E
  3
AcDbVariableDictionary
350
9B
  3
QCAD_OBJECTS
350
9C
  0
DICTIONARY
  5
D
100
AcDbDictionary
280
0
281
1
  0
ACDBDICTIONARYWDFLT
  5
E
100
AcDbDictionary
281
1
  3
Normal
350
F
100
AcDbDictionaryWithDefault
340
F
  0
ACDBPLACEHOLDER
  5
F
  0
DICTIONARY
  5
17
100
AcDbDictionary
280
0
281
1
  3
Standard
350
18
  0
MLINESTYLE
  5
18
100
AcDbMlineStyle
  2
STANDARD
 70
0
  3

 62
256
 51
90.0
 52
90.0
 71
2
 49
0.5
 62
256
  6
BYLAYER
 49
-0.5
 62
256
  6
BYLAYER
  0
DICTIONARY
  5
19
100
AcDbDictionary
280
0
281
1
  0
DICTIONARY
  5
1A
100
AcDbDictionary
281
1
  3
Layout1
350
1E
  3
Layout2
350
26
  3
Model
350
22
  0
LAYOUT
  5
1E
100
AcDbPlotSettings
  1

  2
none_device
  4

  6

 40
0.0
 41
0.0
 42
0.0
 43
0.0
 44
0.0
 45
0.0
 46
0.0
 47
0.0
 48
0.0
 49
0.0
140
0.0
141
0.0
142
1.0
143
1.0
 70
688
 72
0
 73
0
 74
5
  7

 75
16
147
1.0
148
0.0
149
0.0
100
AcDbLayout
  1
Layout1
 70
1
 71
1
 10
0.0
 20
0.0
 11
420.0
 21
297.0
 12
0.0
 22
0.0
 32
0.0
 14
100000000000000000000.0
 24
100000000000000000000.0
 34
100000000000000000000.0
 15
-100000000000000000000.0
 25
-100000000000000000000.0
 35
-100000000000000000000.0
146
0.0
 13
0.0
 23
0.0
 33
0.0
 16
1.0
 26
0.0
 36
0.0
 17
0.0
 27
1.0
 37
0.0
 76
0
330
1B
  0
LAYOUT
  5
22
100
AcDbPlotSettings
  1

  2
none_device
  4

  6

 40
0.0
 41
0.0
 42
0.0
 43
0.0
 44
0.0
 45
0.0
 46
0.0
 47
0.0
 48
0.0
 49
0.0
140
0.0
141
0.0
142
1.0
143
1.0
 70
1712
 72
0
 73
0
 74
0
  7

 75
0
147
1.0
148
0.0
149
0.0
100
AcDbLayout
  1
Model
 70
1
 71
0
 10
0.0
 20
0.0
 11
12.0
 21
9.0
 12
0.0
 22
0.0
 32
0.0
 14
0.0
 24
0.0
 34
0.0
 15
0.0
 25
0.0
 35
0.0
146
0.0
 13
0.0
 23
0.0
 33
0.0
 16
1.0
 26
0.0
 36
0.0
 17
0.0
 27
1.0
 37
0.0
 76
0
330
1F
  0
LAYOUT
  5
26
100
AcDbPlotSettings
  1

  2
none_device
  4

  6

 40
0.0
 41
0.0
 42
0.0
 43
0.0
 44
0.0
 45
0.0
 46
0.0
 47
0.0
 48
0.0
 49
0.0
140
0.0
141
0.0
142
1.0
143
1.0
 70
688
 72
0
 73
0
 74
5
  7

 75
16
147
1.0
148
0.0
149
0.0
100
AcDbLayout
  1
Layout2
 70
1
 71
2
 10
0.0
 20
0.0
 11
12.0
 21
9.0
 12
0.0
 22
0.0
 32
0.0
 14
0.0
 24
0.0
 34
0.0
 15
0.0
 25
0.0
 35
0.0
146
0.0
 13
0.0
 23
0.0
 33
0.0
 16
1.0
 26
0.0
 36
0.0
 17
0.0
 27
1.0
 37
0.0
 76
0
330
23
  0
DICTIONARY
  5
9B
100
AcDbDictionary
281
1
  3
DIMASSOC
350
9E
  3
HIDETEXT
350
9D
  0
DICTIONARYVAR
  5
9D
100
DictionaryVariables
280
0
  1
2
  0
DICTIONARYVAR
  5
9E
100
DictionaryVariables
280
0
  1
1
  0
DICTIONARY
  5
9C
100
AcDbDictionary
281
1
  3
ColorSettings/BackgroundColor
350
9F
  3
ColorSettings/ColorMode
350
A0
  3
Grid/DisplayGrid00
350
A1
  3
Grid/DisplayGrid01
350
A2
  3
Grid/DisplayGrid02
350
A3
  3
Grid/DisplayGrid03
350
A4
  3
Grid/GridSpacingX00
350
A5
  3
Grid/GridSpacingX01
350
A6
  3
Grid/GridSpacingX02
350
A7
  3
Grid/GridSpacingX03
350
A8
  3
Grid/GridSpacingY00
350
A9
  3
Grid/GridSpacingY01
350
AA
  3
Grid/GridSpacingY02
350
AB
  3
Grid/GridSpacingY03
350
AC
  3
Grid/IsometricGrid00
350
AD
  3
Grid/IsometricGrid01
350
AE
  3
Grid/IsometricGrid02
350
AF
  3
Grid/IsometricGrid03
350
B0
  3
Grid/IsometricProjection00
350
B1
  3
Grid/IsometricProjection01
350
B2
  3
Grid/IsometricProjection02
350
B3
  3
Grid/IsometricProjection03
350
B4
  3
Grid/MetaGridSpacingX00
350
B5
  3
Grid/MetaGridSpacingX01
350
B6
  3
Grid/MetaGridSpacingX02
350
B7
  3
Grid/MetaGridSpacingX03
350
B8
  3
Grid/MetaGridSpacingY00
350
B9
  3
Grid/MetaGridSpacingY01
350
BA
  3
Grid/MetaGridSpacingY02
350
BB
  3
Grid/MetaGridSpacingY03
350
BC
  3
MultiPageSettings/Columns
350
BD
  3
MultiPageSettings/GlueMarginsBottom
350
BE
  3
MultiPageSettings/GlueMarginsLeft
350
BF
  3
MultiPageSettings/GlueMarginsRight
350
C0
  3
MultiPageSettings/GlueMarginsTop
350
C1
  3
MultiPageSettings/PrintCropMarks
350
C2
  3
MultiPageSettings/Rows
350
C3
  3
PageSettings/OffsetX
350
C4
  3
PageSettings/OffsetY
350
C5
  3
PageSettings/PageOrientation
350
C6
  3
PageSettings/PaperHeight
350
C7
  3
PageSettings/PaperWidth
350
C8
  3
PageSettings/Scale
350
C9
  3
PageSettings/ShowPaperBorders
350
CA
  3
UnitSettings/PaperUnit
350
CB
  3
ViewportCenter
350
CC
  3
ViewportHeight
350
CD
  3
ViewportWidth
350
CE
  0
XRECORD
  5
9F
330
9C
100
AcDbXrecord
280
1
1000
White
  0
XRECORD
  5
A0
330
9C
100
AcDbXrecord
280
1
1000
FullColor
  0
XRECORD
  5
A1
330
9C
100
AcDbXrecord
280
1
290
1
  0
XRECORD
  5
A2
330
9C
100
AcDbXrecord
280
1
290
1
  0
XRECORD
  5
A3
330
9C
100
AcDbXrecord
280
1
290
1
  0
XRECORD
  5
A4
330
9C
100
AcDbXrecord
280
1
290
1
  0
XRECORD
  5
A5
330
9C
100
AcDbXrecord
280
1
1000
auto
  0
XRECORD
  5
A6
330
9C
100
AcDbXrecord
280
1
1000
auto
  0
XRECORD
  5
A7
330
9C
100
AcDbXrecord
280
1
1000
auto
  0
XRECORD
  5
A8
330
9C
100
AcDbXrecord
280
1
1000
auto
  0
XRECORD
  5
A9
330
9C
100
AcDbXrecord
280
1
1000
auto
  0
XRECORD
  5
AA
330
9C
100
AcDbXrecord
280
1
1000
auto
  0
XRECORD
  5
AB
330
9C
100
AcDbXrecord
280
1
1000
auto
  0
XRECORD
  5
AC
330
9C
100
AcDbXrecord
280
1
1000
auto
  0
XRECORD
  5
AD
330
9C
100
AcDbXrecord
280
1
290
0
  0
XRECORD
  5
AE
330
9C
100
AcDbXrecord
280
1
290
0
  0
XRECORD
  5
AF
330
9C
100
AcDbXrecord
280
1
290
0
  0
XRECORD
  5
B0
330
9C
100
AcDbXrecord
280
1
290
0
  0
XRECORD
  5
B1
330
9C
100
AcDbXrecord
280
1
 90
65537
  0
XRECORD
  5
B2
330
9C
100
AcDbXrecord
280
1
 90
65537
  0
XRECORD
  5
B3
330
9C
100
AcDbXrecord
280
1
 90
65537
  0
XRECORD
  5
B4
330
9C
100
AcDbXrecord
280
1
 90
65537
  0
XRECORD
  5
B5
330
9C
100
AcDbXrecord
280
1
1000
auto
  0
XRECORD
  5
B6
330
9C
100
AcDbXrecord
280
1
1000
auto
  0
XRECORD
  5
B7
330
9C
100
AcDbXrecord
280
1
1000
auto
  0
XRECORD
  5
B8
330
9C
100
AcDbXrecord
280
1
1000
auto
  0
XRECORD
  5
B9
330
9C
100
AcDbXrecord
280
1
1000
auto
  0
XRECORD
  5
BA
330
9C
100
AcDbXrecord
280
1
1000
auto
  0
XRECORD
  5
BB
330
9C
100
AcDbXrecord
280
1
1000
auto
  0
XRECORD
  5
BC
330
9C
100
AcDbXrecord
280
1
1000
auto
  0
XRECORD
  5
BD
330
9C
100
AcDbXrecord
280
1
 90
1
  0
XRECORD
  5
BE
330
9C
100
AcDbXrecord
280
1
 40
0.5
  0
XRECORD
  5
BF
330
9C
100
AcDbXrecord
280
1
 40
0.5
  0
XRECORD
  5
C0
330
9C
100
AcDbXrecord
280
1
 40
0.5
  0
XRECORD
  5
C1
330
9C
100
AcDbXrecord
280
1
 40
0.5
  0
XRECORD
  5
C2
330
9C
100
AcDbXrecord
280
1
290
0
  0
XRECORD
  5
C3
330
9C
100
AcDbXrecord
280
1
 90
1
  0
XRECORD
  5
C4
330
9C
100
AcDbXrecord
280
1
 40
0.0
  0
XRECORD
  5
C5
330
9C
100
AcDbXrecord
280
1
 40
0.0
  0
XRECORD
  5
C6
330
9C
100
AcDbXrecord
280
1
1000
Portrait
  0
XRECORD
  5
C7
330
9C
100
AcDbXrecord
280
1
 40
11.0
  0
XRECORD
  5
C8
330
9C
100
AcDbXrecord
280
1
 40
8.5
  0
XRECORD
  5
C9
330
9C
100
AcDbXrecord
280
1
1000
1:1
  0
XRECORD
  5
CA
330
9C
100
AcDbXrecord
280
1
290
1
  0
XRECORD
  5
CB
330
9C
100
AcDbXrecord
280
1
 90
1
  0
XRECORD
  5
CD
330
9C
100
AcDbXrecord
280
1
 40
1020.6402267597767377
  0
XRECORD
  5
CE
330
9C
100
AcDbXrecord
280
1
 40
830.0034027960252843
  0
ENDSEC
  0
EOF
")


(defparameter *dxf-footer* *dxf-footer-new*)


(defparameter *dxf-header-pre-1592*
  "  0
SECTION
  2
HEADER
  9
$ACADVER
  1
AC1009
  9
$DWGCODEPAGE
  3
ANSI_1252
  9
$INSBASE
 10
0.0
 20
0.0
 30
0.0
  9
$EXTMIN
 10
-500.0
 20
-500.0
 30
1.000000000000000E+20
  9
$EXTMAX
 10
500.0
 20
500.0
 30
-1.000000000000000E+20
  9
$LIMMIN
 10
-500.0
 20
-500.0
  9
$LIMMAX
 10
500.0
 20
500.0
  9
$ORTHOMODE
 70
     0
  9
$LTSCALE
 40
1.0
  9
$TEXTSTYLE
  7
Standard
  9
$LUNITS
 70
     2
  9
$LUPREC
 70
     4
  9
$SPLINESEGS
 70
     8
9
$INSUNITS
70
~a
0    
ENDSEC
0
SECTION
  2
TABLES
  0
TABLE
  2
STYLE
  70
1
  0
STYLE
  2
GDLSTYLE
  70
0
  40
0.0
  41
1.0
  50
0.0
  71
0
  42
0.2
  3
TXT
  0
ENDTAB
  0
TABLE
  2
LTYPE
  70
3
  0
LTYPE
  2
DASHED
  70
64
  3
__ __ __ __
  72
65
  73
2
  40
0.75
  49
0.5
  49
-0.25
  0
LTYPE
  2
CENTER
  70
64
  3
___ _ ___ _ ___
  72
65
  73
4
  40
0.75
  49
0.4
  49
-0.1
  49
0.15
  49
-0.1
  0
LTYPE
  2
DASHDOT
  70
64
  3
__ . __ . __
  72
65
  73
4
  40
0.75
  49
0.5
  49
-0.12495
  49
0.0001
  49
-0.12495
  0
ENDTAB
  0
ENDSEC
  0
SECTION
  2
ENTITIES
")



(defparameter *dxf-footer-pre-1592*
    " 0
ENDSEC
  0
EOF
")


(define-format dxf (2d-output)
  :slots ((units *dxf-units-default*)))


(defun legacy-dxf ()
  (setq *dxf-header* *dxf-header-pre-1592*
	*dxf-footer* *dxf-footer-pre-1592*)

  (format t "Switched to legacy DXF header and footer.~%"))

(defun new-dxf ()
  (setq *dxf-header* *dxf-header-new*
	*dxf-footer* *dxf-footer-new*)

  (format t "Switched to new DXF header and footer.~%"))

(defun lcad-dxf ()
  (setq *dxf-header* *dxf-header-lcad*
	*dxf-footer* *dxf-footer-lcad*)

  (format t "Switched to LibreCAD-flavor DXF header and footer.~%"))
