<!DOCTYPE HTML><html lang="en"><head><title>GendL Application - BASE-OBJECT</title><meta charset="UTF-8" /><link rel="icon" type="image/x-icon" href="/static/gwl/images/favicon.ico" /><link href="/static/gwl/style/top.css" rel="stylesheet" type="text/css" /><div id="KDpTVEFOREFSRC1KQVZBU0NSSVBULVNFQ1RJT04gKDpET0tVTUVOVEFUSU9OIDUpIDpPQkpFQ1QtRE9DUyAoOlBBQ0tBR0UtRE9LVU1FTlRBVElPTlMgNikp">
<script>
var gdliid = '/yadd';
</script>
<script src="/static/gwl/js/gdlajax1595.js"></script></div></head><body><div id="KDpNQUlOLVNFQ1RJT04gKDpET0tVTUVOVEFUSU9OIDUpIDpPQkpFQ1QtRE9DUyAoOlBBQ0tBR0UtRE9LVU1FTlRBVElPTlMgNikp"><p><a href="/package-dokumentations/6/index.html">Package Documentation</a></p><table BGCOLOR="#eeeeff" WIDTH="100%" BORDER=0 CELLPADDING=1 CELLSPACING=0><tr><td><b><font SIZE="+1">Object: BASE-OBJECT<font SIZE=-1><i> (The :GEOM-BASE Package)</i></font></font></b></td></tr><tr><td><b>Mixins: </b>VANILLA-MIXIN</td></tr></table><p><h3>Description</h3>Base-Object is a superclass of most of GDL's geometric primitives. It 
provides an imaginary geometric reference box with a length, width, height, center, 
and orientation.</p><table WIDTH="100%" BORDER=0 CELLPADDING=1 CELLSPACING=0><tr BGCOLOR="#eeeeff"><td COLSPAN=2><b><font SIZE="+1">Input Slots (optional)</font></b></td></tr><tr><td><br></td></tr><tr><td ALIGN="LEFT"><b>BOUNDING-BOX</b> <i>list of two 3d points</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> The left front bottom and right rear top corners, in global coordinates,
of the rectangular volume bounding the tree of geometric objects rooted at this object.
</p><dl></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><td ALIGN="LEFT"><b>HIDDEN?</b> [<i>from <a href="/master-index-grouped/662/index.html">VANILLA-MIXIN*</a></i>]  <i>boolean</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> Indicates whether the object should effectively be a hidden-object even if specified in :objects. Default is nil.
</p><dl></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><td ALIGN="LEFT"><b>IMAGE-FILE</b> <i>pathname or string</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> Points to a pre-existing image file to be displayed instead of actual geometry for this object. Defaults to nil
</p><dl></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><td ALIGN="LEFT"><b>LOCAL-BOX</b> <i>list of two 3d points</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> The left front bottom and right rear top corners, in global coordinates,
of the rectangular volume bounding this geometric object.
</p><dl></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><td ALIGN="LEFT"><b>OBLIQUENESS</b> <i>3x3 orthonormal matrix of double-float numbers</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> This is synonymous with the <tt>orientation</tt>.
</p><dl></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><td ALIGN="LEFT"><b>ONCLICK-FUNCTION</b> <i>lambda function of zero arguments, or nil</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> If non-nil, this
function gets invoked when the user clicks the object in graphics
front-ends which support this functionality, e.g. SVG/Raphael and X3DOM.
</p><dl></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><td ALIGN="LEFT"><b>ROOT</b> [<i>from <a href="/master-index-grouped/662/index.html">VANILLA-MIXIN*</a></i>]  <i>gdl instance</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> The root-level node in this object's ``tree'' (instance hierarchy).
</p><dl></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><td ALIGN="LEFT"><b>SAFE-CHILDREN</b> [<i>from <a href="/master-index-grouped/662/index.html">VANILLA-MIXIN*</a></i>]  <i>list of gdl instances</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> All objects from the :objects specification, including elements of sequences
as flat lists. Any children which throw errors come back as a plist with error information
</p><dl></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><td ALIGN="LEFT"><b>STRINGS-FOR-DISPLAY</b> [<i>from <a href="/master-index-grouped/662/index.html">VANILLA-MIXIN*</a></i>]  <i>string or list of strings</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> Determines how the name of objects of
this type will be printed in most places.  This defaults to the
name-for-display (generally the part's name as specified in its
parent), followed by an index number if the part is an element of a
sequence.
</p><dl></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><td ALIGN="LEFT"><b>VISIBLE-CHILDREN</b> [<i>from <a href="/master-index-grouped/662/index.html">VANILLA-MIXIN*</a></i>]  <i>list of gdl instances</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> Additional objects to display in Tatu
tree. Typically this would be a subset of
hidden-children. Defaults to NIL.
</p><dl></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><br></tr></table><table WIDTH="100%" BORDER=0 CELLPADDING=1 CELLSPACING=0><tr BGCOLOR="#eeeeff"><td COLSPAN=2><b><font SIZE="+1">Input Slots (optional, defaulting)</font></b></td></tr><tr><td><br></td></tr><tr><td ALIGN="LEFT"><b>CENTER</b> <i>3d point</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> Indicates in global coordinates where the center of the reference
box of this object should be located.
</p><dl></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><td ALIGN="LEFT"><b>DISPLAY-CONTROLS</b> <i>plist</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> May contain keywords and values indicating display characteristics for
this object. The following keywords are recognized currently:

<dl>
<dt>:color</dt>
<dd> color keyword from the *color-table* parameter, or an HTML-style hexidecimal
RGB string value, e.g. "#FFFFFF" for pure white. Defaults to :black.</dd>
<dt>:line-thickness</dt>
<dd> an integer, defaulting to 1, indicating relative line thickness for wireframe
representations of this object.</dd>
<dt>:dash-pattern</dt>
<dd>(currently PDF/PNG/JPEG only). This is a list of two or three numbers which indicate the length,
in pixels, of the dashes and blank spaces in a dashed line. The optional third number
indicates how far into the line or curve to start the dash pattern.</dd>
</dl>
</p><dl></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><td ALIGN="LEFT"><b>HEIGHT</b> <i>number</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> Z-axis dimension of the reference box. Defaults to zero.
</p><dl></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><td ALIGN="LEFT"><b>LENGTH</b> <i>number</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> Y-axis dimension of the reference box. Defaults to zero.
</p><dl></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><td ALIGN="LEFT"><b>ORIENTATION</b> <i>3x3 matrix of double-float numbers</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> Indicates the absolute Rotation Matrix used to create
the coordinate system of this object. This matrix is given in absolute terms (i.e. with
respect to the root's orientation), and is generally created with the alignment function.
It should be an <i>orthonormal</i> matrix, meaning each row is a vector with a magnitude
of one (1.0).
</p><dl></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><td ALIGN="LEFT"><b>WIDTH</b> <i>number</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> X-axis dimension of the reference box. Defaults to zero.
</p><dl></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><br></tr></table><table WIDTH="100%" BORDER=0 CELLPADDING=1 CELLSPACING=0><tr BGCOLOR="#eeeeff"><td COLSPAN=2><b><font SIZE="+1">Computed Slots</font></b></td></tr><tr><td><br></td></tr><tr><td ALIGN="LEFT"><b>COLOR-DECIMAL</b> <i>vector of three real numbers</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> The RBG color of this object specified in :display-controls.
Defaults to the foreground color specified in <tt>*colors-default*</tt>. This message should not normally be overridden in user application code.
</p><dl></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><td ALIGN="LEFT"><b>LOCAL-CENTER</b> <i>3d point</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> The center of this object, from the perspective of the parent. Starting
from the parent's center and using the parent's orientation, this is the relative center
of this object.
</p><dl></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><td ALIGN="LEFT"><b>LOCAL-CENTER*</b> <i>3d point</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> The center of this object, from the perspective of the parent. Starting
from the parent's center and using the parent's orientation, this is the relative center
of this object.
</p><dl></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><td ALIGN="LEFT"><b>LOCAL-ORIENTATION</b> <i>3x3 matrix of double-float numbers</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> Indicates the local Rotation Matrix used
to create the coordinate system of this object. This is the ``local''
orientation with respect to the parent. Multiplying the parent's orientation
with this matrix will always result in the absolute orientation for this part.
</p><dl><dt><i>note:</i></dt><dd>An orientation of NIL indicates the 3x3 identity matrix. 
</dd></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><br></tr></table><table WIDTH="100%" BORDER=0 CELLPADDING=1 CELLSPACING=0><tr BGCOLOR="#eeeeff"><td COLSPAN=2><b><font SIZE="+1">Hidden Objects</font></b></td></tr><tr><td><br></td></tr><tr><td ALIGN="LEFT"><b>BOUNDING-BBOX</b> <i>gdl object of type box</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> A box representing the bounding-box.
</p><dl></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><td ALIGN="LEFT"><b>LOCAL-BBOX</b> <i>gdl object of type box</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> A box representing the local-box.
</p><dl></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><br></tr></table><table WIDTH="100%" BORDER=0 CELLPADDING=1 CELLSPACING=0><tr BGCOLOR="#eeeeff"><td COLSPAN=2><b><font SIZE="+1">GDL Functions</font></b></td></tr><tr><td><br></td></tr><tr><td ALIGN="LEFT"><b>AXIS-VECTOR</b> <i>3d vector</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> Returns the vector pointing in the positive direction of the specified axis of this object's reference box.
</p><dl><dt><i>arguments:</i></dt><dd><dl><small><dt><b>axis</b> <i>Keyword</i></dt><dd> One of the standard axis keywords: :lateral, :longitudinal, :vertical</dd></small></dl></dd></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><td ALIGN="LEFT"><b>EDGE-CENTER</b> <i>3d point</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> Returns the center of the requested edge of this object's reference box.
</p><dl><dt><i>arguments:</i></dt><dd><dl><small><dt><b>direction-1</b> <i>Keyword</i></dt><dd> One of the standard direction keywords: :right, :left, :rear, :front, :top, :bottom</dd></small><small><dt><b>direction-2</b> <i>Keyword</i></dt><dd> A standard direction keyword orthogonal to direction-1</dd></small></dl></dd></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><td ALIGN="LEFT"><b>FACE-CENTER</b> <i>3d point</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> Returns the center of the requested face (the
requested face with respect to the `wrt` argument if present, or self
if `wrt` is nil) of this object's reference box.
</p><dl><dt><i>arguments:</i></dt><dd><dl><small><dt><b>direction</b> <i>Keyword</i></dt><dd> One of the standard direction 
keywords: :right, :left, :rear, :front, :top, :bottom</dd></small></dl></dd></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><td ALIGN="LEFT"><b>FACE-NORMAL-VECTOR</b> <i>3d vector</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> Returns the vector pointing from this object's reference box center to its requested face-center.
</p><dl><dt><i>arguments:</i></dt><dd><dl><small><dt><b>direction</b> <i>Keyword</i></dt><dd> One of the standard direction keywords: :right, :left, :rear, :front, :top, :bottom</dd></small></dl></dd></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><td ALIGN="LEFT"><b>FACE-VERTICES</b> <i>list of four 3d points</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> Returns the vertices of the indicated face.
</p><dl><dt><i>arguments:</i></dt><dd><dl><small><dt><b>direction</b> <i>Direction keyword, e</i></dt><dd>g. :top, :bottom etc. Indicates for which face to return the vertices</dd></small></dl></dd></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><td ALIGN="LEFT"><b>GLOBAL-TO-LOCAL</b> <i>3d-point</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> This function returns the point given in global coordinates, into relative local coordinates,
based on the orientation and center of the object to which the global-to-local message is sent.
</p><dl><dt><i>arguments:</i></dt><dd><dl><small><dt><b>point</b> <i>3D-point</i></dt><dd> The point to be converted to local coordinates</dd></small></dl></dd><dt><i>examples:</i></dt><dd>Please see the examples area. 
</dd></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><td ALIGN="LEFT"><b>IN-FACE?</b> <i>boolean</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> Returns non-nil if the given point is in halfspace defined by the plane given a point and direction.
</p><dl><dt><i>arguments:</i></dt><dd><dl><small><dt><b>point</b> <i>3D point</i></dt><dd> a point in the plane</dd></small><small><dt><b>direction</b> <i>3D vector</i></dt><dd> The normal of the plane</dd></small></dl></dd></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><td ALIGN="LEFT"><b>LINE-INTERSECTION-POINTS</b> <i>list of 3d points</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> Returns the points of intersection between given line and the reference box of this object.
</p><dl><dt><i>arguments:</i></dt><dd><dl><small><dt><b>p-line</b> <i>3D point</i></dt><dd> A point in the line</dd></small><small><dt><b>u-line</b> <i>3D vector</i></dt><dd> The direction vector of the line</dd></small></dl></dd></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><td ALIGN="LEFT"><b>LOCAL-TO-GLOBAL</b> <i>3d-point</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> This function returns the point given in relative local coordinates, converted into global coordinates,
based on the orientation and center of the object to which the local-to-global message is sent.
</p><dl><dt><i>arguments:</i></dt><dd><dl><small><dt><b>point</b> <i>3D-point</i></dt><dd> The local point to be converted to global coordinates</dd></small></dl></dd><dt><i>examples:</i></dt><dd>Please see the examples area. 
</dd></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><td ALIGN="LEFT"><b>VERTEX</b> <i>3d point</i></td><td ALIGN="RIGHT"><br></td></tr><tr><td COLSPAN=2><p> Returns the center of the requested vertex (corner) of this object's reference box.
</p><dl><dt><i>arguments:</i></dt><dd><dl><small><dt><b>direction-1</b> <i>Keyword</i></dt><dd> One of the standard direction keywords: :right, :left, :rear, :front, :top, :bottom</dd></small><small><dt><b>direction-2</b> <i>Keyword</i></dt><dd> A standard direction keyword orthogonal to direction-1</dd></small><small><dt><b>direction-3</b> <i>Keyword</i></dt><dd> A standard direction keyword orthogonal to direction-1 and direction-2</dd></small></dl></dd></dl></td></tr><tr><td COLSPAN=2><br></td></tr><tr><br></tr></table><p><h3>Examples</h3><pre>

 (in-package :gdl-user)

 (define-object tower (base-object)
  
  :input-slots 
   ((number-of-blocks 50) (twist-per-block 1)
    (block-height 1) (block-width 5) (block-length 7))
  
  :objects
   ((blocks :type 'box
            :sequence (:size (the number-of-blocks))
            :center (translate (the center) 
                               :up (* (the-child index) 
                                      (the-child height)))
            :width (the block-width) 
            :height (the block-height) 
            :length (the block-length)
            :orientation (alignment 
                          :rear (if (the-child first?)
                                    (rotate-vector-d (the (face-normal-vector  :rear))
                                                     (the twist-per-block)
                                                     (the (face-normal-vector :top)))
                                    (rotate-vector-d (the-child previous 
                                                     (face-normal-vector :rear))
                                                     (the twist-per-block)
                                                     (the (face-normal-vector :top))))
                          :top (the (face-normal-vector :top))))))
;;
;;Test run
;;
#|
gdl-user(46): (setq self (make-object 'tower))
 #tower @ #x750666f2
gdl-user(47): (setq test-center (the (blocks 10) center))
#(0.0 0.0 10.0)
gdl-user(48): (the (blocks 10) (global-to-local test-center))
#(0.0 0.0 0.0)
gdl-user(49): (the (blocks 10) (local-to-global (the (blocks 10) 
                                                (global-to-local test-center))))
#(0.0 0.0 10.0)
gdl-user(50): 
gdl-user(50): (setq test-vertex (the (blocks 10) (vertex :top :right :rear)))
#(1.7862364748012536 3.9127176305081863 10.5)
gdl-user(51): (the (blocks 10) (global-to-local test-vertex))
#(2.500000000000001 3.500000000000001 0.5)
gdl-user(52): (the (blocks 10) (local-to-global (the (blocks 10) 
                                                (global-to-local test-vertex))))
#(1.786236474801254 3.9127176305081877 10.5)
gdl-user(53): 
|#
;;
;;
;;

</pre></p><p><a href="/package-dokumentations/6/index.html">Package Documentation</a></p><p><p class="copyrightFooter">Copyright &copy; 2025 <a href="http://www.genworks.com">Genworks</a><sup>&reg;</sup> <a href="http://www.genworks.com">International</a>. All rights reserved. <i><small>Genworks Build: 1598p001</small></i></p></p></div></body></html>