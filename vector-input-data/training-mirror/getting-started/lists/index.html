<!DOCTYPE HTML><html lang="en"><head><title>Lists</title><meta charset="UTF-8" /><link rel="icon" type="image/png" href="/gorn.png" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="stylesheet" href="/css/training-style.css" /><script src="/static/3rdpty/x3dom/x3dom.js" id="x3dom_script"></script><script id="svg-panzoom" src="/static/3rdpty/svgpanzoom/svg-pan-zoom.min.js"></script><script>
var gdliid = '/shared';</script><script src="/static/gwl/js/gdlajax1595.js"></script></head><body><div class="container mx-auto"><div class="main-page-item"><div class="mt-1 ml-2 mr-5"><h2>Lists</h2><p><a class="text-red-500" href="/getting-started/object-sequences/index.html">&lt;-Previous</a><span class="font-bold"> | </span><a class="text-blue-500" href="/getting-started/index.html">^UP^</a><span class="font-bold"> | </span><a class="text-green-500" href="/getting-started/functions-and-functions/index.html">Next-&gt;</a></p><p>Lists are fundamental to Lisp - LISt Processing</p><p>A list is defined textually as zero or more elements enclosed by parentheses. The elements can actually be anything, e.g. numbers, strings, objects, more lists, keywords</p><p><span class="general-keyword">nil</span> is defined an an empty list. It also acts as the Boolean value for false.
This is one of the few places in Lisp where a single value assumes more than one meaning</p><h3>Creating Lists</h3><p>There are 2 basic ways to create a list<ul><li>Using the <span class="function">list</span> function</li></ul><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(setq a (list 1 2 3))</span></p><span class="output">(1 2 3)</span></pre></div><ul><li>Quoting a literal list</li></ul><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(setq b '(4 5 6 7 8 9))</span></p><span class="output">(4 5 6 7 8 9)</span></pre></div>However, there are many other functions which return lists</p><h3>Adding to lists</h3><p>The Common Lisp function <span class="function">append</span> takes 2 or more lists and returns a new list
which results from appending them into a single list. It does not modify the given input lists. If the arguments are not lists then <span class="function">append</span> will behave in different ways depending on where the non-list element is<ul><li>If it is the last of the arguments append will generate a dotted list</li><li>If it is in any other position an error will be generated</li></ul></p><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(append (list 1 2) (list 3 4))</span></p><span class="output">(1 2 3 4)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(append (list 1 2) (list 3 4) 5)</span></p><span class="output">(1 2 3 4 . 5)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(append 0 (list 1 2) (list 3 4))</span></p><span class="error">; Evaluation aborted on #&#60;TYPE-ERROR #x2103F1595D>.</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(append (list 1 2) 0 (list 3 4))</span></p><span class="error">; Evaluation aborted on #&#60;TYPE-ERROR #x2103EBBCBD>.</span></pre></div><p>If the second argument to the Common Lisp function <span class="function">cons</span> is a list, then <span class="function">cons</span> will return a list with the first
argument prepended to the front of it. Contrast the difference in output compared to <span class="function">append</span> when the first argument to <span class="function">cons</span> is a list</p><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(cons 1 (list 2 3 4))</span></p><span class="output">(1 2 3 4)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;"> (cons (list 1 2) (list 2 3 4))</span></p><span class="output">((1 2) 2 3 4)</span></pre></div><p>the Common Lisp macro <span class="macro">push</span> works in much the same way as  <span class="function">cons</span> but <span class="function">push</span> modifies the list (its second argument) in-place,
while <span class="function">cons</span> simply returns a new list and does not modify its arguments in any way.</p><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(setq a nil)</span></p><span class="output">NIL</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(push 1 a)</span></p><span class="output">(1)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(push 2 a)</span></p><span class="output">(2 1)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(push 2 a)</span></p><span class="output">(3 2 1)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">a</span></p><span class="output">(3 2 1)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(push (list 1 2 3) a)</span></p><span class="output">((1 2 3) 3 2 1)</span></pre></div><h3>Accessing elements within a list</h3><p>The Lisp function <span class="function">first</span> returns the first element of a list, whilst the Lisp function <span class="function">rest</span> returns a list minus the first element</p><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(first a)</span></p><span class="output">1</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(rest a)</span></p><span class="output">(2 3)</span></pre></div><p>Lisp also defines some archaically-named list access functions which you may encounter in legacy code,such as  <span class="function">car</span> (synonym for <span class="function">first</span>), <span class="function">cdr</span> (synonym for <span class="function">rest</span>), and some compound ones such as <span class="function">cadr</span>, <span class="function">caddr</span>, and so on.</p><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(car a)</span></p><span class="output">1</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(cdr a)</span></p><span class="output">(2 3)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(caddr a)</span></p><span class="output">3</span></pre></div><p>If you encounter any of these archaic names, you may look them up in a standard CL reference.</p><p>Common Lisp defines first through to tenth as functions to retrieve the corresponding element of a list</p><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(first a)</span></p><span class="output">1</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(fourth b)</span></p><span class="output">7</span></pre></div><p>The Common Lisp function <span class="function">last</span> returns the last element of a list <em><b>as a list</b></em>. To get the last element, use the GendL function <span class="function">lastcar</span></p><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(last a)</span></p><span class="output">(3)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(lastcar a)</span></p><span class="output">3</span></pre></div><p>Finally to return any element in a list, Common Lisp provides the function <span class="function">nth</span>. <span class="function">nth</span> takes an index number and a list and will return the the element at the position in the list defined by the index number. Note that nth is zero-based, so the first element in a list in (nth 0 [list]). There is a corresponding function <span class="function">nthcdr</span>, again taking an index number and list as arguments which will return the nth <span class="function">cdr</span> of a list</p><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(nth 3 b)</span></p><span class="output">7</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(nthcdr 3 b)</span></p><span class="output">(7 8 9)</span></pre></div><h3>Plists</h3><p>Plists are a special type of list which is made up of keyword-value pairs. Rather than accessing elements of the list by position, the value element is accessed by referencing the keyword. Plists are a very convenient way to hold data and are widely used. The <span class="function">getf</span> function, which takes a Plist and keyword as arguments returns the value immediately following the keyword</p><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(setq c (list :a 1 :b 2 :c 3))</span></p><span class="output">(:A 1 :B 2 :C 3)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(getf c :b)</span></p><span class="output">2</span></pre></div><p>Note that if a keyword is defined more than once in a plist, <span class="function">getf</span> will return the value associated with the first occurrence of the keyword</p><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(setq c (list :a 1 :b 2 :c 3 :a 4))</span></p><span class="output">(:A 1 :B 2 :C 3 :A 4)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(getf c :a)</span></p><span class="output">1</span></pre></div><p>Values in a plist may be updated by using a combination of the Common Lisp <span class="function">setf</span> and <span class="function">getf</span> functions</p><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(setq d (list :a 1 :b 2 :c 3))</span></p><span class="output">(:A 1 :B 2 :C 3)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(setf (getf d :b) 10)</span></p><span class="output">10</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">d</span></p><span class="output">(:A 1 :B 10 :C 3)</span></pre></div><h3>Using lists in GendL</h3><p>The example below is based on <span class="object">assembly-5</span> from the Sequences of Objects tutorial, converted to use lists. A few features to observe<ul><li>The number of <span class="object">my-box</span> objects is now calculated based on the elements in the list defined by the <span class="keyword">:computed-slot</span> <span class="slot">box-lengths</span>, using the Common Lisp function <span class="function">length</span></li><li>The <span class="slot">length</span> of each <span class="object">my-box</span> object uses (<span class="macro">the-child</span> <span class="slot">index</span>) to access the nth element of the <span class="slot">box-lengths</span> list</li><li>The <span class="keyword">:computed-slot</span> <span class="slot">box-volumes</span> makes use of the GendL macro <span class="macro">list-elements</span> to list all of the <span class="object">my-box</span> objects and then send the volume message to them using the GendL macro <span class="macro">the-element</span></li></ul></p><div class="main-page-container"><div class="main-page-item"><div class="code-example"><pre><span class="code" style="margin-left: 0px;">(define-object assembly-8 (base-object)</span><span class="code" style="margin-left: 0px;"></span><span class="code" style="margin-left: 0px;">:computed-slots</span><span class="code" style="margin-left: 0px;">((box-lengths (list 2 5 8))</span><span class="code" style="margin-left: 7px;">(box-centers (list (make-point 0 0 0)</span><span class="code" style="margin-left: 42px;">(make-point 6 0 0)</span><span class="code" style="margin-left: 42px;">(make-point 12 0 0)))</span><span class="code" style="margin-left: 7px;">(number-of-boxes (length (the box-lengths)))</span><span class="code" style="margin-left: 7px;">(box-volumes (list-elements (the my-box) (the-element volume)))</span><span class="code" style="margin-left: 7px;">(box-1-volume (nth 0 (the box-volumes))))</span><span class="code" style="margin-left: 0px;"></span><span class="code" style="margin-left: 0px;">:objects</span><span class="code" style="margin-left: 0px;">((my-box :type 'box</span><span class="code" style="margin-left: 14px;">:sequence (:size (the number-of-boxes))</span><span class="code" style="margin-left: 14px;">:length (nth (the-child index) (the box-lengths))</span><span class="code" style="margin-left: 14px;">:width 2</span><span class="code" style="margin-left: 14px;">:height 1</span><span class="code" style="margin-left: 14px;">:center (nth (the-child index) (the box-centers)))))</span></pre></div></div><div class="main-page-item"><img src="/t2-images/using-lists.png" style="width: auto; height: 300px; margin: 1em 0 1em 3% ;" /></div></div><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(setq self (make-object 'assembly-8))</span></p><span class="output">#&#60;GDL-USER::ASSEMBLY-8 #x210456C58D></span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(list-elements (the my-box))</span></p><span class="output">(#&#60;BOX #x210456A86D> #&#60;BOX #x210456F2BD> #&#60;BOX #x210456EE9D>)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(the box-volumes)</span></p><span class="output">(4 10 16)</span></pre></div><div class="main-page-item"><h2>Resources</h2><table><tr><td><a href="/t2-resources/lists.lisp"><img src="/common-images/lisp-file.png" style="width: 40px; height: auto;" /></a></td><td><a href="/t2-resources/lists.lisp">lists.lisp</a></td></tr><tr><td><a href="/t2-resources/using-lists.lisp"><img src="/common-images/lisp-file.png" style="width: 40px; height: auto;" /></a></td><td><a href="/t2-resources/using-lists.lisp">using-lists.lisp</a></td></tr></table></div></div></div></div></body></html>