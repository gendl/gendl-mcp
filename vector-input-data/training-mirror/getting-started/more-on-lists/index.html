<!DOCTYPE HTML><html lang="en"><head><title>More on Lists</title><meta charset="UTF-8" /><link rel="icon" type="image/png" href="/gorn.png" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="stylesheet" href="/css/training-style.css" /><script src="/static/3rdpty/x3dom/x3dom.js" id="x3dom_script"></script><script id="svg-panzoom" src="/static/3rdpty/svgpanzoom/svg-pan-zoom.min.js"></script><script>
var gdliid = '/shared';</script><script src="/static/gwl/js/gdlajax1595.js"></script></head><body><div class="container mx-auto"><div class="main-page-item"><div class="mt-1 ml-2 mr-5"><h2>More on Lists</h2><p><a class="text-red-500" href="/getting-started/wall-example/index.html">&lt;-Previous</a><span class="font-bold"> | </span><a class="text-blue-500" href="/getting-started/index.html">^UP^</a><span class="font-bold"> | </span><a class="text-green-500" href="/getting-started/iteration-and-mapping/index.html">Next-&gt;</a></p><p>In the earlier tutorial on <a href="/getting-started/lists/index.html">Lists</a> we covered Creating Lists, Adding to Lists, Accessing elements
within a List, and treating Lists as Property Lists (Plists). In this
tutorial we will continue to look at working with lists.</p><h3>List Properties</h3><p>Common Lisp provides a number of functions for obtaining properties of lists<ul><div class="grid-container-2"><div class="main-page-item"><li><span class="function">length</span> takes a <em>list</em> as its argument and returns an <em>integer</em> corresponding to the number of elements within that list. </li>Note that if any of the elements of the list passed to <span class="function">length</span> is
itself a list or other aggregate data type, it still counts as a single element for the purposes of <span class="function">length</span>.</div><div class="main-page-item"><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(setq a (list 1 2 3))</span></p><span class="output">(1 2 3)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(length a)</span></p><span class="output">3</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(setq b (list 1 2 (list 3 4 5 6)))</span></p><span class="output">(1 2 (3 4 5 6))</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(length b)</span></p><span class="output">3</span></pre></div></div><div class="main-page-item"><li><span class="function">member</span> takes an <em>object</em> and <em>list</em> as arguments and returns all the values in the list starting with the first element matching object.</li>If there is no match the function returns nil</div><div class="main-page-item"><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(member 2 a)</span></p><span class="output">(2 3)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(member 4 a)</span></p><span class="output">NIL</span></pre></div></div><div class="main-page-item"><span class="function">member</span> uses the equality test <span class="function">eql</span> as the default test. An alternative test may be provided using the <span class="object-keyword">:test</span> keyword input. Whatever function is specified for<span class="object-keyword">:test</span> needs to be <em><b>quoted</b></em></div><div class="main-page-item"><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(setq c (list "a" "b" "c"))</span></p><span class="output">("a" "b" "c")</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(member "a" c)</span></p><span class="output">NIL</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(member "a" c :test 'equal)</span></p><span class="output">("a" "b" "c")</span></pre></div></div><div class="main-page-item"><li><span class="function">position</span> takes an <em>object</em> and a <em>list</em> as inputs and returns the index number of the first object in the list matching object.</li>The index number is zero-based. Again, the default test for equality is <span class="function">eql</span> but you can override this by specifying a <span class="object-keyword">:test</span> keyword input</div><div class="main-page-item"><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(position 2 a)</span></p><span class="output">1</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(position "b" c)</span></p><span class="output">NIL</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(position "b" c :test 'equal)</span></p><span class="output">2</span></pre></div></div></div></ul></p><h3>List Processing</h3><p>There are a number of Common Lisp functions which allow us to process lists in various ways,
such as returning part of a list, returning a new list with elements removed, and re-ordering or sorting a list<ul><div class="grid-container-2"><div class="main-page-item"><li><span class="function">subseq</span> treats a list as a sequence. Its takes a <em>list</em> and <em>start</em> position and optionally an <em>end</em> position, returning a list comprising the elements from and including the start position up to but excluding the end position. Positions are zero-based. Note that if either <em>start</em> or <em>end</em> is a higher index than the maximum index number in the list, then an error will be generated</li></div><div class="main-page-item"><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(setq lis (list 1 2 3 "a" "B" (list 1 2 3)))</span></p><span class="output">(1 2 3 "a" "B" (1 2 3))</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(subseq lis 2)</span></p><span class="output">(3 "a" "B" (1 2 3))</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(subseq lis 2 4)</span></p><span class="output">(3 "a")</span></pre></div></div><div class="main-page-item"><li><span class="function">remove</span> takes an <em>object</em> and a <em>list</em> as inputs and returns the list with <em>object</em> removed from it. By default the equality test is <span class="function">EQL</span>, but an alternative may be specified using the <span class="object-keyword">:test</span> keyword input. If <span class="object-keyword">:start</span> or <span class="object-keyword">:end</span> keywords are provided, only elements between those positions are tested for a match and removed. Finally if <span class="object-keyword">:count</span> is provided only the first <em>count</em> instances of <em>object</em> are removed</li></div><div class="main-page-item"><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(setq rm (list 1 2 3 4 3 4 5 6 4 5 4 5 3 1))</span></p><span class="output">(1 2 3 4 3 4 5 6 4 5 4 5 3 1)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(remove 3 rm)</span></p><span class="output">(1 2 4 4 5 6 4 5 4 5 1)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(remove 3 rm :count 2)</span></p><span class="output">(1 2 4 4 5 6 4 5 4 5 3 1)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(remove 3 rm :start 3)</span></p><span class="output">(1 2 3 4 4 5 6 4 5 4 5 1)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(remove 3 rm :start 3 :end 6)</span></p><span class="output">(1 2 3 4 4 5 6 4 5 4 5 3 1)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(setq rm1 (list (list 1 2) (list 3 4) (list 1 3)))</span></p><span class="output">((1 2) (3 4) (1 3))</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(remove (list 3 4) rm1 :test 'equal)</span></p><span class="output">((1 2) (1 3))</span></pre></div></div><div class="main-page-item"><li><span class="function">delete</span> is identical to <span class="function">remove</span> except it <em><b>modifies the input list</b></em></li></div><div class="main-page-item"><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">rm1</span></p><span class="output">((1 2) (3 4) (1 3))</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(delete (list 3 4) rm1 :test 'equal)</span></p><span class="output">((1 2) (1 3))</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">rm1</span></p><span class="output">((1 2) (1 3))</span></pre></div></div><div class="main-page-item"><li><span class="function">remove-duplicates</span> removes any duplicate values from a list, where duplicate is tested by default using <span class="function">eql</span>. As with <span class="function">remove</span>, <span class="object-keyword">:test</span>, <span class="object-keyword">:start</span> and <span class="object-keyword">:end</span> keyword inputs may be specified. </li>When duplicates are found, only the last occurrence of the duplicate is retained in the return value</div><div class="main-page-item"><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(setq rm (list 1 2 3 4 3 4 5 6 4 5 4 5 3 1))</span></p><span class="output">(1 2 3 4 3 4 5 6 4 5 4 5 3 1)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(remove-duplicates rm)</span></p><span class="output">(2 6 4 5 3 1)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(setq rm (list "a" "b" "c" "a" "A"))</span></p><span class="output">("a" "b" "c" "a" "A")</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(remove-duplicates rm)</span></p><span class="output">("a" "b" "c" "a" "A")</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(remove-duplicates rm :test 'equal)</span></p><span class="output">("b" "c" "a" "A")</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(remove-duplicates rm :test 'equalp)</span></p><span class="output">("b" "c" "A")</span></pre></div></div><div class="main-page-item"><li><span class="function">flatten</span> (a GendL function, not included in standard Common Lisp) takes a <em>list</em> as input, which may comprise sub-lists, and returns a one dimensional list. Because nil is an empty list, any occurences of nil in a list passed to <span class="function">flatten</span> will be removed</li></div><div class="main-page-item"><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(setq lis (list 1 2 3 (list 1 4 5) (list "a" "b") (list :a 1 :b 2)))</span></p><span class="output">(1 2 3 1 4 5 "a" "b" :A 1 :B 2)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(flatten lis)</span></p><span class="output">(1 2 3 1 4 5 "a" "b" :A 1 :B 2)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(setq lis (list 1 2 3 nil (list 1 4 5) (list "a" "b") nil (list :a 1 :b 2)))</span></p><span class="output">(1 2 3 1 nil 4 5 "a" "b" nil :A 1 :B 2)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(flatten lis)</span></p><span class="output">(1 2 3 1 4 5 "a" "b" :A 1 :B 2)</span></pre></div></div><div class="main-page-item"><li><span class="function">reverse</span> takes a <em>list</em> as input and returns a list but with the elements in the reverse order.<span class="function">nreverse</span>is the destructive version of reverse, ie it may alter the supplied list</li></div><div class="main-page-item"><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(setq a (list 1 2 3 4 5))</span></p><span class="output">(1 2 3 4 5)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(reverse a)</span></p><span class="output">(5 4 3 2 1)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">a</span></p><span class="output">(1 2 3 4 5)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(nreverse a)</span></p><span class="output">(5 4 3 2 1)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">a</span></p><span class="output">(1)</span></pre></div></div></div></ul></p><h3>List Sorting</h3><ul><div class="grid-container-2"><div class="main-page-item"><li><span class="function">sort</span> is a Common Lisp function which takes a <em>List</em> and a <em>predicate</em>as arguments and returns a list such that no 2 successive elements [x] and [y] returns false for (predicate x y) and true for (predicate y x)</li><p>A significant downside of using <span class="function">sort</span> is that it is distructive - it can modify the input list. GendL therefore defines a function <span class="function">safe-sort</span> which mirrors <span class="function">sort</span> in every respect apart from <em><b>it does not modify the input list</b></em>. It is <em><b>strongly recomended</b></em> to use <span class="function">safe-sort</span> for any list sorting</p><p>An obvious but sometimes overlooked equirement for the input list is that for <span class="function">sort</span> or <span class="function">safe-sort</span> to be meaningful, the elements in the list must be of types which may be compared with the same predicate</p></div><div class="main-page-item"><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(setq a (list 1 3 2 5 4))</span></p><span class="output">(1 3 2 5 4)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(setq b (list 1 3 2 5 4)</span></p><span class="output">(1 3 2 5 4)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(sort a '<)</span></p><span class="output">(1 2 3 4 5)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">a</span></p><span class="output">(1 2 3 4 5)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(safe-sort b '<)</span></p><span class="output">(1 2 3 4 5)</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">b</span></p><span class="output">(1 3 2 5 4)</span></pre></div></div><div class="main-page-item"><span class="function">sort</span> and <span class="function">safe-sort</span> both have a keyword input <span class="object-keyword">:key</span> which allows the element on which the sorting is to be performed to be identified. <span class="object-keyword">:key</span> is specified as a <em>quoted</em> function which is applied to each element in the input list and then the sort is applied to that return value</div><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(setq a (list (list 2 4) (list 1 6) (list 4 3) (list 3 5)))</span></p><span class="output">((2 4) (1 6) (4 3) (3 5))</span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(safe-sort a '< :key 'first)</span></p><span class="output">((1 6) (2 4) (3 5) (4 3))</span></pre></div></div></ul><div class="main-page-item"><h2>Resources</h2><table><tr><td><a href="/t2-resources/more-on-lists.lisp"><img src="/common-images/lisp-file.png" style="width: 40px; height: auto;" /></a></td><td><a href="/t2-resources/more-on-lists.lisp">more-on-lists.lisp</a></td></tr></table></div></div></div></div></body></html>