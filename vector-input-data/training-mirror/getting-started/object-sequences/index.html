<!DOCTYPE HTML><html lang="en"><head><title>Sequences of Objects</title><meta charset="UTF-8" /><link rel="icon" type="image/png" href="/gorn.png" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="stylesheet" href="/css/training-style.css" /><script src="/static/3rdpty/x3dom/x3dom.js" id="x3dom_script"></script><script id="svg-panzoom" src="/static/3rdpty/svgpanzoom/svg-pan-zoom.min.js"></script><script>
var gdliid = '/shared';</script><script src="/static/gwl/js/gdlajax1595.js"></script></head><body><div class="container mx-auto"><div class="main-page-item"><div class="mt-1 ml-2 mr-5"><h2>Sequences of Objects</h2><p><a class="text-red-500" href="/getting-started/positioning-and-orientation/index.html">&lt;-Previous</a><span class="font-bold"> | </span><a class="text-blue-500" href="/getting-started/index.html">^UP^</a><span class="font-bold"> | </span><a class="text-green-500" href="/getting-started/lists/index.html">Next-&gt;</a></p><p>In many cases you may have child objects which are of the same type
and only differ in the values of inputs they are given. If you know how
many objects there are (and assuming not too many), you could define
them independently and give each its own name, as we did for example
in assembly-2</p><div class="code-example"><pre><span class="code" style="margin-left: 0px;">(define-object assembly-2 (base-object)</span><span class="code" style="margin-left: 7px;">:objects</span><span class="code" style="margin-left: 7px;">((box-1 :type 'box</span><span class="code" style="margin-left: 63px;">:length 5</span><span class="code" style="margin-left: 63px;">:width 1</span><span class="code" style="margin-left: 63px;">:height 1)</span><span class="code" style="margin-left: 14px;">(box-2 :type 'box</span><span class="code" style="margin-left: 63px;">:length 10</span><span class="code" style="margin-left: 63px;">:height 5</span><span class="code" style="margin-left: 63px;">:width 3</span><span class="code" style="margin-left: 63px;">:center (make-point 2 2 2))</span><span class="code" style="margin-left: 14px;">(box-3 :type 'box</span><span class="code" style="margin-left: 63px;">:length 5</span><span class="code" style="margin-left: 63px;">:height 5</span><span class="code" style="margin-left: 63px;">:width 5</span><span class="code" style="margin-left: 63px;">:center (translate-along-vector (the box-2 center)</span><span class="code" style="margin-left: 287px;">(make-vector 1 1 0)</span><span class="code" style="margin-left: 294px;">5)))</span><span class="code" style="margin-left: 7px;">)</span></pre></div><p>However, there may be times when you do not know in advance how many
objects there will be, or you may want to compute the properties of each object
based on its identity (e.g. based on its numerical <span class="slot">index</span>). In either of these cases, a <span class="general-keyword">:sequence</span> of objects may be appropriate.</p><p>A <span class="general-keyword">:sequence</span> defines an ordered group of objects.
There are four types of <span class="general-keyword">:sequence</span>s:<ul><li>A standard sequence - the object specification is defined with the input <span class="general-keyword">:sequence (:size &lt;number-expression&gt;)</span> and a number of objects equal to the value of <em>&lt;number-expression&gt;</em> will be created</li><li>A radial sequence -  the object specification is defined with the input <span class="general-keyword">:sequence (:radial &lt;number-expression&gt;)</span> and a number of objects equal to the value of <em>&lt;number-expression&gt;</em> will be created</li><li>A variable sequence - Allows objects in the groups to be
programatically added and deleted. The object specification is defined with the input <span class="general-keyword">:sequence (:indices &lt;list-of-indices&gt;)</span></li><li>A matrix sequence - quantification is generated
as a result of specifying <span class="general-keyword">:sequence (:matrix &lt;direction-keyword-1&gt; &lt;number-1&gt;
&lt;direction-keyword-2&gt;&lt;number-2&gt;)</span> in an <span class="object-keyword">:objects</span> specification. The direction-keywords can be one of: <span class="general-keyword">:lateral</span>, <span class="general-keyword">:longitudinal</span>, or <span class="general-keyword">:vertical</span>.</li></ul></p><p>In this tutorial we will cover only standard and radial sequences.</p><p>When a sequence is generated, each object is assigned a zero-based <span class="slot">index</span> number. When referencing the object from <em>outside</em> the <span class="object-keyword">:objects</span> specification, its <span class="slot">index</span> number must be included with the object name between parentheses.
Likewise, from <em>inside</em> the <span class="object-keyword">:objects</span> specification, each child can reference its own <span class="slot">index</span> slot (or any other of its slots) by
using the reference macro <span class="macro">the-child</span>. </p><h3>Standard Sequence</h3><p>So consider the following code which defines a sequence of three boxes,
each of which has its <span class="slot">length</span> and <span class="slot">center</span> defined based on its <span class="slot">index</span> number.</p><div class="code-example"><pre><span class="code" style="margin-left: 0px;">(define-object assembly-6 (base-object)</span><span class="code" style="margin-left: 7px;"></span><span class="code" style="margin-left: 7px;">:input-slots</span><span class="code" style="margin-left: 7px;">((number-of-boxes 3))</span><span class="code" style="margin-left: 7px;"></span><span class="code" style="margin-left: 7px;">:computed-slots</span><span class="code" style="margin-left: 7px;">((first-box-volume-1 (the (boxes 0) volume))</span><span class="code" style="margin-left: 14px;">(first-box-volume-2 (the-object (the boxes last) volume))</span><span class="code" style="margin-left: 14px;">(second-box-volume (the (boxes 1) volume))</span><span class="code" style="margin-left: 14px;">(last-box-volume-1 (the (boxes (- (the number-of-boxes)) volume)))</span><span class="code" style="margin-left: 14px;">(last-box-volume-1 (the-object (the boxes last) volume)))</span><span class="code" style="margin-left: 7px;"></span><span class="code" style="margin-left: 7px;">:objects</span><span class="code" style="margin-left: 7px;">((boxes :type 'box</span><span class="code" style="margin-left: 35px;">:sequence (:size (the number-of-boxes))</span><span class="code" style="margin-left: 35px;">:length (+ 2 (* (the-child index) 3))</span><span class="code" style="margin-left: 35px;">:width 2</span><span class="code" style="margin-left: 35px;">:height 1</span><span class="code" style="margin-left: 35px;">:center (make-point (* (the-child index) 6) 0 0))))</span></pre></div><img src="/t2-images/sequence-1.png" style="width: auto; height: 300px; margin: 1em 0 1em 3% ;" /><p>Note in the Geysr tree, the the names of the child instances include
the index number of each.</p><p>Also note in the code example the diferent ways to access
the object instances and their messages:<ul><li>Using an index - <code>(the (boxes &lt;index-number&gt;) volume)</code>, where <code>(boxes &lt;index-number&gt;)</code>, i.e. the combination of object name and <span class="slot">index</span> enclosed in parentheses,
evaluates to the object instance which is the desired element of the sequence.</li><li>Using <span class="slot">first</span> and <span class="slot">last</span> - these are <span class="object-keyword">:computed-slots</span> in the sequence definition which return the first and last objects in the sequence.</li></ul></p><p>To review:  <ul><li><code><b>(the boxes)</b></code> refers to the whole <em><b>sequence</b></em>.</li><li><code><b>(the (boxes &lt;index&gt;))</b></code> refers to a <em><b>specific element</b></em> within that <em><b>sequence</b></em></li></ul></p><div class="repl-example"><pre><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(setq self (make-object 'assembly-6))</span></p><span class="output">#&#60;ASSEMBLY-6 #x21045E42CD></span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(the boxes)</span></p><span class="output">#&#60;GENDL::STANDARD-SEQUENCE #x21045E3E9D></span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(the (boxes 0))</span></p><span class="output">#&#60;BOX #x21046CBA5D></span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(the boxes first)</span></p><span class="output">#&#60;BOX #x21046CBA5D></span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(the boxes last)</span></p><span class="output">#&#60;BOX #x21082334D8></span><p style="display: inline;"><span class="prompt" style="display: inline;">GDL-USER>&nbsp;</span><span class="command" style="display: inline;">(the (boxes 1) previous)</span></p><span class="output">#&#60;BOX #x21046CBA5D></span></pre></div><h3>Radial Sequence</h3><p>Consider the following code, identical to the standard sequence
example except the <span class="general-keyword">:sequence</span> definition is changed to <span class="general-keyword">:radial</span> and the <span class="slot">:center</span> definition is removed.</p><div class="code-example"><pre><span class="code" style="margin-left: 0px;">(define-object assembly-7 (base-object)</span><span class="code" style="margin-left: 7px;"></span><span class="code" style="margin-left: 7px;">:input-slots</span><span class="code" style="margin-left: 7px;">((number-of-boxes 3))</span><span class="code" style="margin-left: 7px;"></span><span class="code" style="margin-left: 7px;">:objects</span><span class="code" style="margin-left: 7px;">((boxes :type 'box</span><span class="code" style="margin-left: 35px;">:sequence (:radial (the number-of-boxes))</span><span class="code" style="margin-left: 35px;">:length (+ 2 (* (the-child index) 3))</span><span class="code" style="margin-left: 35px;">:width 2</span><span class="code" style="margin-left: 35px;">:height 1</span></pre></div><img src="/t2-images/radial-sequence.png" style="width: auto; height: 300px; margin: 1em 0 1em 3% ;" /><div class="main-page-item"><p>The Geysr image is with <em><b>View..Perspective..Top</b></em> enabled to show the effect of the <span class="general-keyword">:radial</span> definition. Essentially a <span class="general-keyword">:radial</span> sequence orients each obect so it is rotated <em><b>360/[number-expression]</b></em> degrees compared to its predecessor. You can of course override this
default behavior by feeding an explicit <span class="slot">center</span> and/or <span class="slot">orientation</span> into each element.</p></div><h2>Resources</h2><table><tr><td><a href="/t2-resources/sequences.lisp"><img src="/common-images/lisp-file.png" style="width: 40px; height: auto;" /></a></td><td><a href="/t2-resources/sequences.lisp">sequences.lisp</a></td></tr></table></div></div></div></body></html>