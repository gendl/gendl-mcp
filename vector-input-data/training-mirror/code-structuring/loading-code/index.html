<!DOCTYPE HTML><html lang="en"><head><title>Loading Code with cl-lite</title><meta charset="UTF-8" /><link rel="icon" type="image/png" href="/gorn.png" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="stylesheet" href="/css/training-style.css" /><script src="/static/3rdpty/x3dom/x3dom.js" id="x3dom_script"></script><script id="svg-panzoom" src="/static/3rdpty/svgpanzoom/svg-pan-zoom.min.js"></script><script>
var gdliid = '/shared';</script><script src="/static/gwl/js/gdlajax1595.js"></script></head><body><div class="container mx-auto"><div class="main-page-item"><div class="mt-1 ml-2 mr-5"><h2>Loading Code with cl-lite</h2><p><a class="text-red-500" href="/code-structuring/code-structuring/index.html">&lt;-Previous</a><span class="font-bold"> | </span><a class="text-blue-500" href="/code-structuring/index.html">^UP^</a><span class="font-bold"> | </span><a class="text-green-500" href="/code-structuring/index-page/index.html">Next-&gt;</a></p><div class="main-page-container" style="grid-template-columns: 600px auto;"><div class="main-page-item"><p>In previous topics, we have seen that there is some requirement to manage the load order. With small numbers of source files this is manageable manually, but once the number of source files exceeds maybe 5 or 6, this becomes an onerous and somewhat tedious task</p><p>GendL has a utility to support this called <span class="function">cl-lite</span>. It can be called from either the REPL or it can be initiated from the init file (gdlinit.cl). <span class="function">cl-lite</span> supports the following features<ul><li>It will load any .lisp file found in any <em><b>source</b></em> directory below the target directory. So in the example codebase on the right, if <span class="function">cl-lite</span> was applied to the <em><b>airplane</b></em> directory it would load .lisp files from <em><b>source</b></em>, <em><b>common/source</b></em>, <em><b>engine/source</b></em>, <em><b>fuselage/source</b></em> and <em><b>wing/source</b></em></li><li>The order in which directories are loaded may be specified at any level using a <b>system-ordering.isc</b> file</li><li>The order in which files in a source folder are loaded may be specified for that <em><b>source</b></em> directory in a <b>file-ordering.isc</b> file</li><li>Directories or files to be ignored can be specified in an  <b>ignore-list.isc</b> file</li></ul></p><p>The structure of the <b>system-ordering.isc</b>, <b>file-ordering.isc</b> and <b>ignore-list.isc</b> is identical; it is a literal list of strings identifying target folders or files. Note that <b>ignore-list.isc</b> may apply to either directories or files whilst <b>system-ordering.isc</b> only applies to directories and <b>file-ordering.isc</b> only applies to files</p></div><div class="main-page-item"><img src="/t3-images/codebase.png" style="width: auto; height: 300px; margin: 0 0 0 0 ;" /></div><div class="main-page-item"><h3>Executing cl-lite</h3><p><span class="function">cl-lite</span> takes a pathname argument. The pathname may be a string or a logical pathname</p><div class="code-example"><pre><span class="code" style="margin-left: 0px;">(cl-lite "/codebase/airplane")</span></pre></div><p>If we wanted to enforce a <em>load order</em> for the directories we would use the <b>system-ordering.isc file</b>. In this example, assuming multiple packages which mirror the directory structure, we would probably want to load <em><b>common</b></em> first, then <em><b>engine</b></em>, <em><b>wing</b></em> and <em><b>fuselage</b></em> (since they would <span class="object-keyword">:use</span> the <span class="package-name">:airplane-common</span> package) and lastly the <em><b>source</b></em> directory since it would <span class="object-keyword">:use</span> all of the previously defined packages. So <b>system-ordering.isc</b> would look like this</p><div class="code-example"><pre><span class="code" style="margin-left: 0px;">("common" "wing" "fuselage" "engine" "source")</span></pre></div><p>Assuming each of the folders has a package file, we would want to load that as the first file when the directory is loaded, so each <em><b>source</b></em> folder would have a <b>file-ordering.isc</b> file like this</p><div class="code-example"><pre><span class="code" style="margin-left: 0px;">("package")</span></pre></div><p>2 things to note here<ul><li>There is no need to specify the file extension</li><li>There is only a requirement to specify files which have special load order, any other files in the folder are loaded by default in alphabetical order</li></ul></p><p>Finally, if for some reason we wished to suppress the load of the engine module, we would use the <b>ignore-list.isc</b> file in the <em><b>airplane</b></em> directory as shown below</p><div class="code-example"><pre><span class="code" style="margin-left: 0px;">("engine")</span></pre></div></div></div></div></div></div></body></html>